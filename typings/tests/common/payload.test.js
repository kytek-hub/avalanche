"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const buffer_1 = require("buffer/");
const payload_1 = require("src/utils/payload");
const bintools_1 = __importDefault(require("src/utils/bintools"));
const bn_js_1 = __importDefault(require("bn.js"));
const bech32 = __importStar(require("bech32"));
let payloadTypes = payload_1.PayloadTypes.getInstance();
let bintools = bintools_1.default.getInstance();
describe("Payload", () => {
    let hrp = "tests";
    let cb58str = "MBcQpm1PsdfBKYscN3AYP56MusRDMZGF9";
    let cb58buf = bintools.bufferToB58(bintools.cb58Decode(cb58str));
    let bech = bech32.encode(hrp, bech32.toWords(bintools.b58ToBuffer(cb58buf)));
    let binstr = "Bx4v7ytutz3";
    let utf8str = "I am the very model of a modern Major-General.";
    let utf8b58 = bintools.bufferToB58(buffer_1.Buffer.from(utf8str));
    let utf8hex = buffer_1.Buffer.from(utf8str).toString("hex");
    let utf8b64 = buffer_1.Buffer.from(utf8str).toString("base64");
    let bnhex = "deadbeef";
    let svgstr = "<svg>hi mom</svg>";
    let csvstr = "1,2,3,4,5\neverybody,in the,house,come along, let's ride";
    let jsonobj = { boom: "goes the dynamite" };
    let yamlstr = "---\nrootproperty: blah\nsection:\n  one: two\n  three: four\n  Foo: Bar\n  empty: ~";
    let emailstr = "example@example.com";
    let urlstr = "https://example.com";
    let ipfsstr = "QmUy4jh5mGNZvLkjies1RWM4YuvJh5o2FYopNPVYwrRVGV";
    let onionstr = "https://el33th4xor.onion";
    let magnetstr = "magnet:?xt=urn:btih:c12fe1c06bba254a9dc9f519b335aa7c1367a88a";
    test("PayloadTypes", () => {
        expect(() => { payloadTypes.select(867309); }).toThrow();
        expect(payloadTypes.lookupID("BIN")).toBe(0);
        let pl = payloadTypes.select(0, binstr);
        expect(payloadTypes.getTypeID(pl.toBuffer())).toBe(0);
        let pp = payloadTypes.getContent(pl.toBuffer());
        expect(bintools.b58ToBuffer(binstr).toString("hex")).toBe(pp.toString("hex"));
        expect(payloadTypes.lookupType(0)).toBe("BIN");
        expect(payloadTypes.recast(pl).toBuffer().toString("hex")).toBe(pl.toBuffer().toString("hex"));
    });
    let testTable = [
        ["BIN", binstr, binstr],
        ["UTF8", utf8str, utf8b58],
        ["HEXSTR", utf8hex, utf8b58],
        ["B58STR", utf8b58, utf8b58],
        ["B64STR", utf8b64, utf8b58],
        ["BIGNUM", bnhex, bintools.bufferToB58(buffer_1.Buffer.from(bnhex, "hex"))],
        ["XCHAINADDR", "X-" + bech, cb58buf],
        ["PCHAINADDR", "P-" + bech, cb58buf],
        ["CCHAINADDR", "C-" + bech, cb58buf],
        ["TXID", cb58str, cb58buf],
        ["ASSETID", cb58str, cb58buf],
        ["UTXOID", cb58str, cb58buf],
        ["NFTID", cb58str, cb58buf],
        ["SUBNETID", cb58str, cb58buf],
        ["CHAINID", cb58str, cb58buf],
        ["NODEID", cb58str, cb58buf],
        ["SECPSIG", cb58str, cb58str],
        ["SECPENC", cb58str, cb58str],
        ["JPEG", binstr, binstr],
        ["PNG", binstr, binstr],
        ["BMP", binstr, binstr],
        ["ICO", binstr, binstr],
        ["SVG", svgstr, bintools.bufferToB58(buffer_1.Buffer.from(svgstr))],
        ["CSV", csvstr, bintools.bufferToB58(buffer_1.Buffer.from(csvstr))],
        ["JSON", JSON.stringify(jsonobj), bintools.bufferToB58(buffer_1.Buffer.from(JSON.stringify(jsonobj)))],
        ["YAML", yamlstr, bintools.bufferToB58(buffer_1.Buffer.from(yamlstr))],
        ["EMAIL", emailstr, bintools.bufferToB58(buffer_1.Buffer.from(emailstr))],
        ["URL", urlstr, bintools.bufferToB58(buffer_1.Buffer.from(urlstr))],
        ["IPFS", ipfsstr, ipfsstr],
        ["ONION", onionstr, bintools.bufferToB58(buffer_1.Buffer.from(onionstr))],
        ["MAGNET", magnetstr, bintools.bufferToB58(buffer_1.Buffer.from(magnetstr))]
    ];
    test.each(testTable)('Basic Payload Test: typestr %s input %s inputbuff %s', (typestr, inputstr, inputbuff) => {
        let buff = bintools.b58ToBuffer(inputbuff);
        let typeid = payloadTypes.lookupID(typestr);
        let typename = payloadTypes.lookupType(typeid);
        expect(typename).toBe(typestr);
        let c0 = payloadTypes.select(typeid);
        expect(c0.typeID()).toBe(typeid);
        expect(c0.typeName()).toBe(typename);
        let c1 = payloadTypes.select(typeid, buff);
        let c2 = payloadTypes.select(typeid, inputstr, hrp);
        let c3 = payloadTypes.select(typeid);
        c3.fromBuffer(c1.toBuffer());
        let c4 = payloadTypes.select(typeid);
        c4.fromBuffer(c2.toBuffer());
        let s1 = c1.toBuffer().toString("hex");
        let s2 = c2.toBuffer().toString("hex");
        let s3 = c3.toBuffer().toString("hex");
        let s4 = c4.toBuffer().toString("hex");
        expect(s1).toBe(s2);
        expect(s2).toBe(s3);
        expect(s3).toBe(s4);
    });
    test("BINPayload special cases", () => {
        let pl = payloadTypes.select(0, binstr);
        expect(bintools.bufferToB58(pl.returnType())).toBe(binstr);
    });
    test("UTF8Payload special cases", () => {
        let pl = new payload_1.UTF8Payload(utf8str);
        expect(pl.returnType()).toBe(utf8str);
    });
    test("HEXSTRPayload special cases", () => {
        let pl = new payload_1.HEXSTRPayload(utf8hex);
        expect(pl.returnType()).toBe(utf8hex);
    });
    test("B58STRPayload special cases", () => {
        let pl = new payload_1.B58STRPayload(utf8b58);
        expect(pl.returnType()).toBe(utf8b58);
    });
    test("B64STRPayload special cases", () => {
        let pl = new payload_1.B64STRPayload(utf8b64);
        expect(pl.returnType()).toBe(utf8b64);
    });
    test("BIGNUMPayload special cases", () => {
        let jenny = new bn_js_1.default(8675309);
        let pl = new payload_1.BIGNUMPayload(jenny);
        expect(pl.returnType().toString("hex")).toBe(jenny.toString("hex"));
    });
    test("XCHAINADDRPayload special cases", () => {
        let addr = "X-" + bech;
        let pl = new payload_1.XCHAINADDRPayload(addr, hrp);
        expect(pl.returnType(hrp)).toBe(addr);
        expect(pl.returnChainID()).toBe("X");
    });
    test("PCHAINADDRPayload special cases", () => {
        let addr = "P-" + bech;
        let pl = new payload_1.PCHAINADDRPayload(addr, hrp);
        expect(pl.returnType(hrp)).toBe(addr);
        expect(pl.returnChainID()).toBe("P");
    });
    test("CCHAINADDRPayload special cases", () => {
        let addr = "C-" + bech;
        let pl = new payload_1.CCHAINADDRPayload(addr, hrp);
        expect(pl.returnType(hrp)).toBe(addr);
        expect(pl.returnChainID()).toBe("C");
    });
    //handles all of cb58EncodedPayload
    test("TXIDPayload special cases", () => {
        let pl = new payload_1.TXIDPayload(cb58str);
        expect(pl.returnType()).toBe(cb58str);
    });
    test("JSONPayload special cases", () => {
        let pl = new payload_1.JSONPayload(jsonobj);
        expect(JSON.stringify(pl.returnType())).toBe(JSON.stringify(jsonobj));
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGF5bG9hZC50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vdGVzdHMvY29tbW9uL3BheWxvYWQudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxvQ0FBZ0M7QUFDaEMsK0NBQXFPO0FBQ3JPLGtFQUF5QztBQUN6QyxrREFBc0I7QUFDdEIsK0NBQWdDO0FBQ2hDLElBQUksWUFBWSxHQUFpQixzQkFBWSxDQUFDLFdBQVcsRUFBRSxDQUFBO0FBQzNELElBQUksUUFBUSxHQUFHLGtCQUFRLENBQUMsV0FBVyxFQUFFLENBQUE7QUFFckMsUUFBUSxDQUFDLFNBQVMsRUFBRSxHQUFHLEVBQUU7SUFDdkIsSUFBSSxHQUFHLEdBQVcsT0FBTyxDQUFBO0lBRXpCLElBQUksT0FBTyxHQUFXLG1DQUFtQyxDQUFBO0lBQ3pELElBQUksT0FBTyxHQUFXLFFBQVEsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFBO0lBQ3hFLElBQUksSUFBSSxHQUFXLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDcEYsSUFBSSxNQUFNLEdBQVcsYUFBYSxDQUFBO0lBQ2xDLElBQUksT0FBTyxHQUFXLGdEQUFnRCxDQUFBO0lBQ3RFLElBQUksT0FBTyxHQUFXLFFBQVEsQ0FBQyxXQUFXLENBQUMsZUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFBO0lBQ2hFLElBQUksT0FBTyxHQUFXLGVBQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFBO0lBQzFELElBQUksT0FBTyxHQUFXLGVBQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBQzdELElBQUksS0FBSyxHQUFXLFVBQVUsQ0FBQTtJQUM5QixJQUFJLE1BQU0sR0FBVyxtQkFBbUIsQ0FBQTtJQUN4QyxJQUFJLE1BQU0sR0FBVywwREFBMEQsQ0FBQTtJQUMvRSxJQUFJLE9BQU8sR0FBVyxFQUFFLElBQUksRUFBRSxtQkFBbUIsRUFBRSxDQUFBO0lBQ25ELElBQUksT0FBTyxHQUFXLHNGQUFzRixDQUFBO0lBQzVHLElBQUksUUFBUSxHQUFXLHFCQUFxQixDQUFBO0lBQzVDLElBQUksTUFBTSxHQUFXLHFCQUFxQixDQUFBO0lBQzFDLElBQUksT0FBTyxHQUFXLGdEQUFnRCxDQUFBO0lBQ3RFLElBQUksUUFBUSxHQUFXLDBCQUEwQixDQUFBO0lBQ2pELElBQUksU0FBUyxHQUFXLDhEQUE4RCxDQUFBO0lBRXBGLElBQUksQ0FBQyxjQUFjLEVBQUUsR0FBRyxFQUFFO1FBQ3hCLE1BQU0sQ0FBQyxHQUFHLEVBQUUsR0FBRyxZQUFZLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUE7UUFFdkQsTUFBTSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFFNUMsSUFBSSxFQUFFLEdBQWUsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFlLENBQUE7UUFFakUsTUFBTSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFFckQsSUFBSSxFQUFFLEdBQVcsWUFBWSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQTtRQUV2RCxNQUFNLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFBO1FBQzdFLE1BQU0sQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBQzlDLE1BQU0sQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUE7SUFDaEcsQ0FBQyxDQUFDLENBQUE7SUFFRixJQUFJLFNBQVMsR0FBRztRQUNaLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDdkIsQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQztRQUMxQixDQUFDLFFBQVEsRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDO1FBQzVCLENBQUMsUUFBUSxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUM7UUFDNUIsQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQztRQUM1QixDQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUUsUUFBUSxDQUFDLFdBQVcsQ0FBQyxlQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ2xFLENBQUMsWUFBWSxFQUFFLElBQUksR0FBRyxJQUFJLEVBQUUsT0FBTyxDQUFDO1FBQ3BDLENBQUMsWUFBWSxFQUFFLElBQUksR0FBRyxJQUFJLEVBQUUsT0FBTyxDQUFDO1FBQ3BDLENBQUMsWUFBWSxFQUFFLElBQUksR0FBRyxJQUFJLEVBQUUsT0FBTyxDQUFDO1FBQ3BDLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUM7UUFDMUIsQ0FBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQztRQUM3QixDQUFDLFFBQVEsRUFBRyxPQUFPLEVBQUUs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QyxJQUFJLEtBQUssR0FBTyxJQUFJLGVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUMvQixJQUFJLEVBQUUsR0FBa0IsSUFBSSx1QkFBYSxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBQ2hELE1BQU0sQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQTtJQUNyRSxDQUFDLENBQUMsQ0FBQTtJQUVGLElBQUksQ0FBQyxpQ0FBaUMsRUFBRSxHQUFHLEVBQUU7UUFDM0MsSUFBSSxJQUFJLEdBQVcsSUFBSSxHQUFHLElBQUksQ0FBQTtRQUM5QixJQUFJLEVBQUUsR0FBc0IsSUFBSSwyQkFBaUIsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUE7UUFDNUQsTUFBTSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDckMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUN0QyxDQUFDLENBQUMsQ0FBQTtJQUVGLElBQUksQ0FBQyxpQ0FBaUMsRUFBRSxHQUFHLEVBQUU7UUFDM0MsSUFBSSxJQUFJLEdBQVcsSUFBSSxHQUFHLElBQUksQ0FBQTtRQUM5QixJQUFJLEVBQUUsR0FBc0IsSUFBSSwyQkFBaUIsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUE7UUFDNUQsTUFBTSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDckMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUN0QyxDQUFDLENBQUMsQ0FBQTtJQUVGLElBQUksQ0FBQyxpQ0FBaUMsRUFBRSxHQUFHLEVBQUU7UUFDM0MsSUFBSSxJQUFJLEdBQVcsSUFBSSxHQUFHLElBQUksQ0FBQTtRQUM5QixJQUFJLEVBQUUsR0FBc0IsSUFBSSwyQkFBaUIsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUE7UUFDNUQsTUFBTSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDckMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUN0QyxDQUFDLENBQUMsQ0FBQTtJQUVGLG1DQUFtQztJQUNuQyxJQUFJLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO1FBQ3JDLElBQUksRUFBRSxHQUFnQixJQUFJLHFCQUFXLENBQUMsT0FBTyxDQUFDLENBQUE7UUFDOUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUN2QyxDQUFDLENBQUMsQ0FBQTtJQUVGLElBQUksQ0FBQywyQkFBMkIsRUFBRSxHQUFHLEVBQUU7UUFDckMsSUFBSSxFQUFFLEdBQWdCLElBQUkscUJBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUM5QyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUE7SUFDdkUsQ0FBQyxDQUFDLENBQUE7QUFFVixDQUFDLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJ1ZmZlciB9IGZyb20gXCJidWZmZXIvXCJcbmltcG9ydCB7IFBheWxvYWRUeXBlcywgQklOUGF5bG9hZCwgUGF5bG9hZEJhc2UsIFVURjhQYXlsb2FkLCBIRVhTVFJQYXlsb2FkLCBCNThTVFJQYXlsb2FkLCBCNjRTVFJQYXlsb2FkLCBCSUdOVU1QYXlsb2FkLCBYQ0hBSU5BRERSUGF5bG9hZCwgUENIQUlOQUREUlBheWxvYWQsIENDSEFJTkFERFJQYXlsb2FkLCBUWElEUGF5bG9hZCwgSlNPTlBheWxvYWQgfSBmcm9tICdzcmMvdXRpbHMvcGF5bG9hZCdcbmltcG9ydCBCaW5Ub29scyBmcm9tICdzcmMvdXRpbHMvYmludG9vbHMnXG5pbXBvcnQgQk4gZnJvbSBcImJuLmpzXCJcbmltcG9ydCAqIGFzIGJlY2gzMiBmcm9tICdiZWNoMzInXG5sZXQgcGF5bG9hZFR5cGVzOiBQYXlsb2FkVHlwZXMgPSBQYXlsb2FkVHlwZXMuZ2V0SW5zdGFuY2UoKVxubGV0IGJpbnRvb2xzID0gQmluVG9vbHMuZ2V0SW5zdGFuY2UoKVxuXG5kZXNjcmliZShcIlBheWxvYWRcIiwgKCkgPT4ge1xuICBsZXQgaHJwOiBzdHJpbmcgPSBcInRlc3RzXCJcblxuICBsZXQgY2I1OHN0cjogc3RyaW5nID0gXCJNQmNRcG0xUHNkZkJLWXNjTjNBWVA1Nk11c1JETVpHRjlcIlxuICBsZXQgY2I1OGJ1Zjogc3RyaW5nID0gYmludG9vbHMuYnVmZmVyVG9CNTgoYmludG9vbHMuY2I1OERlY29kZShjYjU4c3RyKSlcbiAgbGV0IGJlY2g6IHN0cmluZyA9IGJlY2gzMi5lbmNvZGUoaHJwLCBiZWNoMzIudG9Xb3JkcyhiaW50b29scy5iNThUb0J1ZmZlcihjYjU4YnVmKSkpXG4gIGxldCBiaW5zdHI6IHN0cmluZyA9IFwiQng0djd5dHV0ejNcIlxuICBsZXQgdXRmOHN0cjogc3RyaW5nID0gXCJJIGFtIHRoZSB2ZXJ5IG1vZGVsIG9mIGEgbW9kZXJuIE1ham9yLUdlbmVyYWwuXCJcbiAgbGV0IHV0ZjhiNTg6IHN0cmluZyA9IGJpbnRvb2xzLmJ1ZmZlclRvQjU4KEJ1ZmZlci5mcm9tKHV0ZjhzdHIpKVxuICBsZXQgdXRmOGhleDogc3RyaW5nID0gQnVmZmVyLmZyb20odXRmOHN0cikudG9TdHJpbmcoXCJoZXhcIilcbiAgbGV0IHV0ZjhiNjQ6IHN0cmluZyA9IEJ1ZmZlci5mcm9tKHV0ZjhzdHIpLnRvU3RyaW5nKFwiYmFzZTY0XCIpXG4gIGxldCBibmhleDogc3RyaW5nID0gXCJkZWFkYmVlZlwiXG4gIGxldCBzdmdzdHI6IHN0cmluZyA9IFwiPHN2Zz5oaSBtb208L3N2Zz5cIlxuICBsZXQgY3N2c3RyOiBzdHJpbmcgPSBcIjEsMiwzLDQsNVxcbmV2ZXJ5Ym9keSxpbiB0aGUsaG91c2UsY29tZSBhbG9uZywgbGV0J3MgcmlkZVwiXG4gIGxldCBqc29ub2JqOiBvYmplY3QgPSB7IGJvb206IFwiZ29lcyB0aGUgZHluYW1pdGVcIiB9XG4gIGxldCB5YW1sc3RyOiBzdHJpbmcgPSBcIi0tLVxcbnJvb3Rwcm9wZXJ0eTogYmxhaFxcbnNlY3Rpb246XFxuICBvbmU6IHR3b1xcbiAgdGhyZWU6IGZvdXJcXG4gIEZvbzogQmFyXFxuICBlbXB0eTogflwiXG4gIGxldCBlbWFpbHN0cjogc3RyaW5nID0gXCJleGFtcGxlQGV4YW1wbGUuY29tXCJcbiAgbGV0IHVybHN0cjogc3RyaW5nID0gXCJodHRwczovL2V4YW1wbGUuY29tXCJcbiAgbGV0IGlwZnNzdHI6IHN0cmluZyA9IFwiUW1VeTRqaDVtR05adkxramllczFSV000WXV2Smg1bzJGWW9wTlBWWXdyUlZHVlwiXG4gIGxldCBvbmlvbnN0cjogc3RyaW5nID0gXCJodHRwczovL2VsMzN0aDR4b3Iub25pb25cIlxuICBsZXQgbWFnbmV0c3RyOiBzdHJpbmcgPSBcIm1hZ25ldDo/eHQ9dXJuOmJ0aWg6YzEyZmUxYzA2YmJhMjU0YTlkYzlmNTE5YjMzNWFhN2MxMzY3YTg4YVwiXG5cbiAgICB0ZXN0KFwiUGF5bG9hZFR5cGVzXCIsICgpID0+IHtcbiAgICAgIGV4cGVjdCgoKSA9PiB7IHBheWxvYWRUeXBlcy5zZWxlY3QoODY3MzA5KSB9KS50b1Rocm93KClcblxuICAgICAgZXhwZWN0KHBheWxvYWRUeXBlcy5sb29rdXBJRChcIkJJTlwiKSkudG9CZSgwKVxuXG4gICAgICBsZXQgcGw6IEJJTlBheWxvYWQgPSBwYXlsb2FkVHlwZXMuc2VsZWN0KDAsIGJpbnN0cikgYXMgQklOUGF5bG9hZFxuXG4gICAgICBleHBlY3QocGF5bG9hZFR5cGVzLmdldFR5cGVJRChwbC50b0J1ZmZlcigpKSkudG9CZSgwKVxuXG4gICAgICBsZXQgcHA6IEJ1ZmZlciA9IHBheWxvYWRUeXBlcy5nZXRDb250ZW50KHBsLnRvQnVmZmVyKCkpXG5cbiAgICAgIGV4cGVjdChiaW50b29scy5iNThUb0J1ZmZlcihiaW5zdHIpLnRvU3RyaW5nKFwiaGV4XCIpKS50b0JlKHBwLnRvU3RyaW5nKFwiaGV4XCIpKVxuICAgICAgZXhwZWN0KHBheWxvYWRUeXBlcy5sb29rdXBUeXBlKDApKS50b0JlKFwiQklOXCIpXG4gICAgICBleHBlY3QocGF5bG9hZFR5cGVzLnJlY2FzdChwbCkudG9CdWZmZXIoKS50b1N0cmluZyhcImhleFwiKSkudG9CZShwbC50b0J1ZmZlcigpLnRvU3RyaW5nKFwiaGV4XCIpKVxuICAgIH0pXG5cbiAgICBsZXQgdGVzdFRhYmxlID0gW1xuICAgICAgICBbXCJCSU5cIiwgYmluc3RyLCBiaW5zdHJdLCBcbiAgICAgICAgW1wiVVRGOFwiLCB1dGY4c3RyLCB1dGY4YjU4XSwgXG4gICAgICAgIFtcIkhFWFNUUlwiLCB1dGY4aGV4LCB1dGY4YjU4XSwgXG4gICAgICAgIFtcIkI1OFNUUlwiLCB1dGY4YjU4LCB1dGY4YjU4XSwgXG4gICAgICAgIFtcIkI2NFNUUlwiLCB1dGY4YjY0LCB1dGY4YjU4XSwgXG4gICAgICAgIFtcIkJJR05VTVwiLCBibmhleCwgYmludG9vbHMuYnVmZmVyVG9CNTgoQnVmZmVyLmZyb20oYm5oZXgsIFwiaGV4XCIpKV0sIFxuICAgICAgICBbXCJYQ0hBSU5BRERSXCIsIFwiWC1cIiArIGJlY2gsIGNiNThidWZdLCBcbiAgICAgICAgW1wiUENIQUlOQUREUlwiLCBcIlAtXCIgKyBiZWNoLCBjYjU4YnVmXSwgXG4gICAgICAgIFtcIkNDSEFJTkFERFJcIiwgXCJDLVwiICsgYmVjaCwgY2I1OGJ1Zl0sIFxuICAgICAgICBbXCJUWElEXCIsIGNiNThzdHIsIGNiNThidWZdLCBcbiAgICAgICAgW1wiQVNTRVRJRFwiLCBjYjU4c3RyLCBjYjU4YnVmXSwgXG4gICAgICAgIFtcIlVUWE9JRFwiLCAgY2I1OHN0ciwgY2I1OGJ1Zl0sIFxuICAgICAgICBbXCJORlRJRFwiLCBjYjU4c3RyLCBjYjU4YnVmXSwgXG4gICAgICAgIFtcIlNVQk5FVElEXCIsIGNiNThzdHIsIGNiNThidWZdLCBcbiAgICAgICAgW1wiQ0hBSU5JRFwiLCBjYjU4c3RyLCBjYjU4YnVmXSwgXG4gICAgICAgIFtcIk5PREVJRFwiLCBjYjU4c3RyLCBjYjU4YnVmXSwgXG4gICAgICAgIFtcIlNFQ1BTSUdcIiwgY2I1OHN0ciwgY2I1OHN0cl0sIFxuICAgICAgICBbXCJTRUNQRU5DXCIsIGNiNThzdHIsIGNiNThzdHJdLCBcbiAgICAgICAgW1wiSlBFR1wiLCBiaW5zdHIsIGJpbnN0cl0sIFxuICAgICAgICBbXCJQTkdcIiwgYmluc3RyLCBiaW5zdHJdLCBcbiAgICAgICAgW1wiQk1QXCIsIGJpbnN0ciwgYmluc3RyXSwgXG4gICAgICAgIFtcIklDT1wiLCBiaW5zdHIsIGJpbnN0cl0sIFxuICAgICAgICBbXCJTVkdcIiwgc3Znc3RyLCBiaW50b29scy5idWZmZXJUb0I1OChCdWZmZXIuZnJvbShzdmdzdHIpKV0sIFxuICAgICAgICBbXCJDU1ZcIiwgY3N2c3RyLCBiaW50b29scy5idWZmZXJUb0I1OChCdWZmZXIuZnJvbShjc3ZzdHIpKV0sIFxuICAgICAgICBbXCJKU09OXCIsIEpTT04uc3RyaW5naWZ5KGpzb25vYmopLCBiaW50b29scy5idWZmZXJUb0I1OChCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShqc29ub2JqKSkpXSwgXG4gICAgICAgIFtcIllBTUxcIiwgeWFtbHN0ciwgYmludG9vbHMuYnVmZmVyVG9CNTgoQnVmZmVyLmZyb20oeWFtbHN0cikpXSwgXG4gICAgICAgIFtcIkVNQUlMXCIsIGVtYWlsc3RyLCBiaW50b29scy5idWZmZXJUb0I1OChCdWZmZXIuZnJvbShlbWFpbHN0cikpXSwgXG4gICAgICAgIFtcIlVSTFwiLCB1cmxzdHIsIGJpbnRvb2xzLmJ1ZmZlclRvQjU4KEJ1ZmZlci5mcm9tKHVybHN0cikpXSwgXG4gICAgICAgIFtcIklQRlNcIiwgaXBmc3N0ciwgaXBmc3N0cl0sIFxuICAgICAgICBbXCJPTklPTlwiLCBvbmlvbnN0ciwgYmludG9vbHMuYnVmZmVyVG9CNTgoQnVmZmVyLmZyb20ob25pb25zdHIpKV0sIFxuICAgICAgICBbXCJNQUdORVRcIiwgbWFnbmV0c3RyLCBiaW50b29scy5idWZmZXJUb0I1OChCdWZmZXIuZnJvbShtYWduZXRzdHIpKV1cbiAgICBdXG4gICAgdGVzdC5lYWNoKHRlc3RUYWJsZSkoXG4gICAgICAnQmFzaWMgUGF5bG9hZCBUZXN0OiB0eXBlc3RyICVzIGlucHV0ICVzIGlucHV0YnVmZiAlcycsXG4gICAgICAgIChcbiAgICAgICAgICAgIHR5cGVzdHI6c3RyaW5nLCBpbnB1dHN0cjpzdHJpbmcsIGlucHV0YnVmZjpzdHJpbmdcbiAgICAgICAgKSA9PiB7XG4gICAgICAgICAgbGV0IGJ1ZmY6IEJ1ZmZlciA9IGJpbnRvb2xzLmI1OFRvQnVmZmVyKGlucHV0YnVmZilcbiAgICAgICAgICBsZXQgdHlwZWlkOiBudW1iZXIgPSBwYXlsb2FkVHlwZXMubG9va3VwSUQodHlwZXN0cilcbiAgICAgICAgICBsZXQgdHlwZW5hbWU6IHN0cmluZyA9IHBheWxvYWRUeXBlcy5sb29rdXBUeXBlKHR5cGVpZClcbiAgICAgICAgICBleHBlY3QodHlwZW5hbWUpLnRvQmUodHlwZXN0cilcbiAgICAgICAgICBsZXQgYzA6IFBheWxvYWRCYXNlID0gcGF5bG9hZFR5cGVzLnNlbGVjdCh0eXBlaWQpXG4gICAgICAgICAgZXhwZWN0KGMwLnR5cGVJRCgpKS50b0JlKHR5cGVpZClcbiAgICAgICAgICBleHBlY3QoYzAudHlwZU5hbWUoKSkudG9CZSh0eXBlbmFtZSlcbiAgICAgICAgICBsZXQgYzE6IFBheWxvYWRCYXNlID0gcGF5bG9hZFR5cGVzLnNlbGVjdCh0eXBlaWQsIGJ1ZmYpXG4gICAgICAgICAgbGV0IGMyOiBQYXlsb2FkQmFzZSA9IHBheWxvYWRUeXBlcy5zZWxlY3QodHlwZWlkLCBpbnB1dHN0ciwgaHJwKVxuICAgICAgICAgIGxldCBjMzogUGF5bG9hZEJhc2UgPSBwYXlsb2FkVHlwZXMuc2VsZWN0KHR5cGVpZClcbiAgICAgICAgICBjMy5mcm9tQnVmZmVyKGMxLnRvQnVmZmVyKCkpXG4gICAgICAgICAgbGV0IGM0OiBQYXlsb2FkQmFzZSA9IHBheWxvYWRUeXBlcy5zZWxlY3QodHlwZWlkKVxuICAgICAgICAgIGM0LmZyb21CdWZmZXIoYzIudG9CdWZmZXIoKSlcbiAgICAgICAgICAgIFxuICAgICAgICAgIGxldCBzMTogc3RyaW5nID0gYzEudG9CdWZmZXIoKS50b1N0cmluZyhcImhleFwiKVxuICAgICAgICAgIGxldCBzMjogc3RyaW5nID0gYzIudG9CdWZmZXIoKS50b1N0cmluZyhcImhleFwiKVxuICAgICAgICAgIGxldCBzMzogc3RyaW5nID0gYzMudG9CdWZmZXIoKS50b1N0cmluZyhcImhleFwiKVxuICAgICAgICAgIGxldCBzNDogc3RyaW5nID0gYzQudG9CdWZmZXIoKS50b1N0cmluZyhcImhleFwiKVxuXG4gICAgICAgIGV4cGVjdChzMSkudG9CZShzMilcbiAgICAgICAgZXhwZWN0KHMyKS50b0JlKHMzKVxuICAgICAgICBleHBlY3QoczMpLnRvQmUoczQpXG4gICAgICB9KVxuXG4gICAgICAgIHRlc3QoXCJCSU5QYXlsb2FkIHNwZWNpYWwgY2FzZXNcIiwgKCkgPT4ge1xuICAgICAgICAgIGxldCBwbDogQklOUGF5bG9hZCA9IHBheWxvYWRUeXBlcy5zZWxlY3QoMCwgYmluc3RyKSBhcyBCSU5QYXlsb2FkXG4gICAgICAgICAgZXhwZWN0KGJpbnRvb2xzLmJ1ZmZlclRvQjU4KHBsLnJldHVyblR5cGUoKSkpLnRvQmUoYmluc3RyKVxuICAgICAgICB9KVxuXG4gICAgICAgIHRlc3QoXCJVVEY4UGF5bG9hZCBzcGVjaWFsIGNhc2VzXCIsICgpID0+IHtcbiAgICAgICAgICBsZXQgcGw6IFVURjhQYXlsb2FkID0gbmV3IFVURjhQYXlsb2FkKHV0ZjhzdHIpXG4gICAgICAgICAgZXhwZWN0KHBsLnJldHVyblR5cGUoKSkudG9CZSh1dGY4c3RyKVxuICAgICAgICB9KVxuXG4gICAgICAgIHRlc3QoXCJIRVhTVFJQYXlsb2FkIHNwZWNpYWwgY2FzZXNcIiwgKCkgPT4ge1xuICAgICAgICAgIGxldCBwbDogSEVYU1RSUGF5bG9hZCA9IG5ldyBIRVhTVFJQYXlsb2FkKHV0ZjhoZXgpXG4gICAgICAgICAgZXhwZWN0KHBsLnJldHVyblR5cGUoKSkudG9CZSh1dGY4aGV4KVxuICAgICAgICB9KVxuXG4gICAgICAgIHRlc3QoXCJCNThTVFJQYXlsb2FkIHNwZWNpYWwgY2FzZXNcIiwgKCkgPT4ge1xuICAgICAgICAgIGxldCBwbDogQjU4U1RSUGF5bG9hZCA9IG5ldyBCNThTVFJQYXlsb2FkKHV0ZjhiNTgpXG4gICAgICAgICAgZXhwZWN0KHBsLnJldHVyblR5cGUoKSkudG9CZSh1dGY4YjU4KVxuICAgICAgICB9KVxuXG4gICAgICAgIHRlc3QoXCJCNjRTVFJQYXlsb2FkIHNwZWNpYWwgY2FzZXNcIiwgKCkgPT4ge1xuICAgICAgICAgIGxldCBwbDogQjY0U1RSUGF5bG9hZCA9IG5ldyBCNjRTVFJQYXlsb2FkKHV0ZjhiNjQpXG4gICAgICAgICAgZXhwZWN0KHBsLnJldHVyblR5cGUoKSkudG9CZSh1dGY4YjY0KVxuICAgICAgICB9KVxuXG4gICAgICAgIHRlc3QoXCJCSUdOVU1QYXlsb2FkIHNwZWNpYWwgY2FzZXNcIiwgKCkgPT4ge1xuICAgICAgICAgIGxldCBqZW5ueTogQk4gPSBuZXcgQk4oODY3NTMwOSlcbiAgICAgICAgICBsZXQgcGw6IEJJR05VTVBheWxvYWQgPSBuZXcgQklHTlVNUGF5bG9hZChqZW5ueSlcbiAgICAgICAgICBleHBlY3QocGwucmV0dXJuVHlwZSgpLnRvU3RyaW5nKFwiaGV4XCIpKS50b0JlKGplbm55LnRvU3RyaW5nKFwiaGV4XCIpKVxuICAgICAgICB9KVxuXG4gICAgICAgIHRlc3QoXCJYQ0hBSU5BRERSUGF5bG9hZCBzcGVjaWFsIGNhc2VzXCIsICgpID0+IHtcbiAgICAgICAgICBsZXQgYWRkcjogc3RyaW5nID0gXCJYLVwiICsgYmVjaFxuICAgICAgICAgIGxldCBwbDogWENIQUlOQUREUlBheWxvYWQgPSBuZXcgWENIQUlOQUREUlBheWxvYWQoYWRkciwgaHJwKVxuICAgICAgICAgIGV4cGVjdChwbC5yZXR1cm5UeXBlKGhycCkpLnRvQmUoYWRkcilcbiAgICAgICAgICBleHBlY3QocGwucmV0dXJuQ2hhaW5JRCgpKS50b0JlKFwiWFwiKVxuICAgICAgICB9KVxuXG4gICAgICAgIHRlc3QoXCJQQ0hBSU5BRERSUGF5bG9hZCBzcGVjaWFsIGNhc2VzXCIsICgpID0+IHtcbiAgICAgICAgICBsZXQgYWRkcjogc3RyaW5nID0gXCJQLVwiICsgYmVjaFxuICAgICAgICAgIGxldCBwbDogUENIQUlOQUREUlBheWxvYWQgPSBuZXcgUENIQUlOQUREUlBheWxvYWQoYWRkciwgaHJwKVxuICAgICAgICAgIGV4cGVjdChwbC5yZXR1cm5UeXBlKGhycCkpLnRvQmUoYWRkcilcbiAgICAgICAgICBleHBlY3QocGwucmV0dXJuQ2hhaW5JRCgpKS50b0JlKFwiUFwiKVxuICAgICAgICB9KVxuXG4gICAgICAgIHRlc3QoXCJDQ0hBSU5BRERSUGF5bG9hZCBzcGVjaWFsIGNhc2VzXCIsICgpID0+IHtcbiAgICAgICAgICBsZXQgYWRkcjogc3RyaW5nID0gXCJDLVwiICsgYmVjaFxuICAgICAgICAgIGxldCBwbDogQ0NIQUlOQUREUlBheWxvYWQgPSBuZXcgQ0NIQUlOQUREUlBheWxvYWQoYWRkciwgaHJwKVxuICAgICAgICAgIGV4cGVjdChwbC5yZXR1cm5UeXBlKGhycCkpLnRvQmUoYWRkcilcbiAgICAgICAgICBleHBlY3QocGwucmV0dXJuQ2hhaW5JRCgpKS50b0JlKFwiQ1wiKVxuICAgICAgICB9KVxuXG4gICAgICAgIC8vaGFuZGxlcyBhbGwgb2YgY2I1OEVuY29kZWRQYXlsb2FkXG4gICAgICAgIHRlc3QoXCJUWElEUGF5bG9hZCBzcGVjaWFsIGNhc2VzXCIsICgpID0+IHtcbiAgICAgICAgICBsZXQgcGw6IFRYSURQYXlsb2FkID0gbmV3IFRYSURQYXlsb2FkKGNiNThzdHIpXG4gICAgICAgICAgZXhwZWN0KHBsLnJldHVyblR5cGUoKSkudG9CZShjYjU4c3RyKVxuICAgICAgICB9KVxuXG4gICAgICAgIHRlc3QoXCJKU09OUGF5bG9hZCBzcGVjaWFsIGNhc2VzXCIsICgpID0+IHtcbiAgICAgICAgICBsZXQgcGw6IEpTT05QYXlsb2FkID0gbmV3IEpTT05QYXlsb2FkKGpzb25vYmopXG4gICAgICAgICAgZXhwZWN0KEpTT04uc3RyaW5naWZ5KHBsLnJldHVyblR5cGUoKSkpLnRvQmUoSlNPTi5zdHJpbmdpZnkoanNvbm9iaikpXG4gICAgICAgIH0pXG5cbn0pXG4iXX0=