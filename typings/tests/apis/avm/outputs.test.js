"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const bn_js_1 = __importDefault(require("bn.js"));
const bintools_1 = __importDefault(require("src/utils/bintools"));
const outputs_1 = require("src/apis/avm/outputs");
const output_1 = require("src/common/output");
const outputs_2 = require("../../../src/apis/avm/outputs");
const avm_1 = require("src/apis/avm");
const bintools = bintools_1.default.getInstance();
describe('Outputs', () => {
    const codecID_zero = 0;
    const codecID_one = 1;
    describe('NFTMintOutput', () => {
        const addrs = [
            bintools.cb58Decode("B6D4v1VtPYLbiUvYXtW4Px8oE9imC2vGW"),
            bintools.cb58Decode("P5wdRuZeaDt28eHMP5S3w9ZdoBfo7wuzF"),
            bintools.cb58Decode("6Y3kysjF9jnHnYkdS9yGAuoHyae2eNmeV")
        ].sort();
        const locktime = new bn_js_1.default(54321);
        const addrpay = [addrs[0], addrs[1]];
        const fallLocktime = locktime.add(new bn_js_1.default(50));
        test('SelectOutputClass', () => {
            const goodout = new outputs_1.NFTMintOutput(0, addrpay, fallLocktime, 1);
            const outpayment = outputs_1.SelectOutputClass(goodout.getOutputID());
            expect(outpayment).toBeInstanceOf(outputs_1.NFTMintOutput);
            expect(() => {
                outputs_1.SelectOutputClass(99);
            }).toThrow("Error - SelectOutputClass: unknown outputid");
        });
        test('comparator', () => {
            const outpayment1 = new outputs_1.NFTMintOutput(1, addrs, fallLocktime, 1);
            const outpayment2 = new outputs_1.NFTMintOutput(2, addrs, fallLocktime, 1);
            const outpayment3 = new outputs_1.NFTMintOutput(0, addrs, fallLocktime, 1);
            const cmp = output_1.Output.comparator();
            expect(cmp(outpayment1, outpayment1)).toBe(0);
            expect(cmp(outpayment2, outpayment2)).toBe(0);
            expect(cmp(outpayment3, outpayment3)).toBe(0);
            expect(cmp(outpayment1, outpayment2)).toBe(-1);
            expect(cmp(outpayment1, outpayment3)).toBe(1);
        });
        test("NFTMintOutput codecIDs", () => {
            const nftMintOutput = new outputs_1.NFTMintOutput(1, addrs, fallLocktime, 1);
            expect(nftMintOutput.getCodecID()).toBe(codecID_zero);
            expect(nftMintOutput.getOutputID()).toBe(avm_1.AVMConstants.NFTMINTOUTPUTID);
            nftMintOutput.setCodecID(codecID_one);
            expect(nftMintOutput.getCodecID()).toBe(codecID_one);
            expect(nftMintOutput.getOutputID()).toBe(avm_1.AVMConstants.NFTMINTOUTPUTID_CODECONE);
            nftMintOutput.setCodecID(codecID_zero);
            expect(nftMintOutput.getCodecID()).toBe(codecID_zero);
            expect(nftMintOutput.getOutputID()).toBe(avm_1.AVMConstants.NFTMINTOUTPUTID);
        });
        test("Invalid NFTMintOutput codecID", () => {
            const nftMintOutput = new outputs_1.NFTMintOutput(1, addrs, fallLocktime, 1);
            expect(() => {
                nftMintOutput.setCodecID(2);
            }).toThrow("Error - NFTMintOutput.setCodecID: invalid codecID. Valid codecIDs are 0 and 1.");
        });
        test('Functionality', () => {
            const out = new outputs_1.NFTMintOutput(0, addrs, fallLocktime, 3);
            expect(out.getOutputID()).toBe(10);
            expect(JSON.stringify(out.getAddresses().sort())).toStrictEqual(JSON.stringify(addrs.sort()));
            expect(out.getThreshold()).toBe(3);
            // expect(out.getLocktime().toNumber()).toBe(locktime.toNumber())
            const r = out.getAddressIdx(addrs[2]);
            expect(out.getAddress(r)).toStrictEqual(addrs[2]);
            expect(() => {
                out.getAddress(400);
            }).toThrow();
            const b = out.toBuffer();
            expect(out.toString()).toBe(bintools.bufferToB58(b));
            const s = out.getSpenders(addrs);
            expect(JSON.stringify(s.sort())).toBe(JSON.stringify(addrs.sort()));
            const m1 = out.meetsThreshold([addrs[0]]);
            expect(m1).toBe(false);
            const m2 = out.meetsThreshold(addrs, new bn_js_1.default(100));
            expect(m2).toBe(false);
            const m3 = out.meetsThreshold(addrs);
            expect(m3).toBe(true);
            const m4 = out.meetsThreshold(addrs, locktime.add(new bn_js_1.default(100)));
            expect(m4).toBe(true);
        });
    });
    describe('SECPTransferOutput', () => {
        const addrs = [
            bintools.cb58Decode("B6D4v1VtPYLbiUvYXtW4Px8oE9imC2vGW"),
            bintools.cb58Decode("P5wdRuZeaDt28eHMP5S3w9ZdoBfo7wuzF"),
            bintools.cb58Decode("6Y3kysjF9jnHnYkdS9yGAuoHyae2eNmeV")
        ].sort();
        const locktime = new bn_js_1.default(54321);
        const addrpay = [addrs[0], addrs[1]];
        const fallLocktime = locktime.add(new bn_js_1.default(50));
        test('SelectOutputClass', () => {
            const goodout = new outputs_1.SECPTransferOutput(new bn_js_1.default(2600), addrpay, fallLocktime, 1);
            const outpayment = outputs_1.SelectOutputClass(goodout.getOutputID());
            expect(outpayment).toBeInstanceOf(outputs_1.SECPTransferOutput);
            expect(() => {
                outputs_1.SelectOutputClass(99);
            }).toThrow("Error - SelectOutputClass: unknown outputid");
        });
        test('comparator', () => {
            const outpayment1 = new outputs_1.SECPTransferOutput(new bn_js_1.default(10000), addrs, locktime, 3);
            const outpayment2 = new outputs_1.SECPTransferOutput(new bn_js_1.default(10001), addrs, locktime, 3);
            const outpayment3 = new outputs_1.SECPTransferOutput(new bn_js_1.default(9999), addrs, locktime, 3);
            const cmp = output_1.Output.comparator();
            expect(cmp(outpayment1, outpayment1)).toBe(0);
            expect(cmp(outpayment2, outpayment2)).toBe(0);
            expect(cmp(outpayment3, outpayment3)).toBe(0);
            expect(cmp(outpayment1, outpayment2)).toBe(-1);
            expect(cmp(outpayment1, outpayment3)).toBe(1);
        });
        test('SECPTransferOutput', () => {
            const out = new outputs_1.SECPTransferOutput(new bn_js_1.default(10000), addrs, locktime, 3);
            expect(out.getOutputID()).toBe(7);
            expect(JSON.stringify(out.getAddresses().sort())).toStrictEqual(JSON.stringify(addrs.sort()));
            expect(out.getThreshold()).toBe(3);
            expect(out.getLocktime().toNumber()).toBe(locktime.toNumber());
            const r = out.getAddressIdx(addrs[2]);
            expect(out.getAddress(r)).toStrictEqual(addrs[2]);
            expect(() => {
                out.getAddress(400);
            }).toThrow();
            expect(out.getAmount().toNumber()).toBe(10000);
            const b = out.toBuffer();
            expect(out.toString()).toBe(bintools.bufferToB58(b));
            const s = out.getSpenders(addrs);
            expect(JSON.stringify(s.sort())).toBe(JSON.stringify(addrs.sort()));
            const m1 = out.meetsThreshold([addrs[0]]);
            expect(m1).toBe(false);
            const m2 = out.meetsThreshold(addrs, new bn_js_1.default(100));
            expect(m2).toBe(false);
            const m3 = out.meetsThreshold(addrs);
            expect(m3).toBe(true);
            const m4 = out.meetsThreshold(addrs, locktime.add(new bn_js_1.default(100)));
            expect(m4).toBe(true);
        });
        test("SECPTransferOutput codecIDs", () => {
            const secPTransferOutput = new outputs_1.SECPTransferOutput(new bn_js_1.default(10000), addrs, locktime, 3);
            expect(secPTransferOutput.getCodecID()).toBe(codecID_zero);
            expect(secPTransferOutput.getOutputID()).toBe(avm_1.AVMConstants.SECPXFEROUTPUTID);
            secPTransferOutput.setCodecID(codecID_one);
            expect(secPTransferOutput.getCodecID()).toBe(codecID_one);
            expect(secPTransferOutput.getOutputID()).toBe(avm_1.AVMConstants.SECPXFEROUTPUTID_CODECONE);
            secPTransferOutput.setCodecID(codecID_zero);
            expect(secPTransferOutput.getCodecID()).toBe(codecID_zero);
            expect(secPTransferOutput.getOutputID()).toBe(avm_1.AVMConstants.SECPXFEROUTPUTID);
        });
        test("Invalid SECPTransferOutput codecID", () => {
            const secPTransferOutput = new outputs_1.SECPTransferOutput(new bn_js_1.default(10000), addrs, locktime, 3);
            expect(() => {
                secPTransferOutput.setCodecID(2);
            }).toThrow("Error - SECPTransferOutput.setCodecID: invalid codecID. Valid codecIDs are 0 and 1.");
        });
        test('SECPMintOutput', () => {
            const out = new outputs_2.SECPMintOutput(addrs, locktime, 3);
            expect(out.getOutputID()).toBe(6);
            expect(JSON.stringify(out.getAddresses().sort())).toStrictEqual(JSON.stringify(addrs.sort()));
            expect(out.getThreshold()).toBe(3);
            expect(out.getLocktime().toNumber()).toBe(locktime.toNumber());
            const r = out.getAddressIdx(addrs[2]);
            expect(out.getAddress(r)).toStrictEqual(addrs[2]);
            expect(() => {
                out.getAddress(400);
            }).toThrow();
            const b = out.toBuffer();
            expect(out.toString()).toBe(bintools.bufferToB58(b));
            const s = out.getSpenders(addrs);
            expect(JSON.stringify(s.sort())).toBe(JSON.stringify(addrs.sort()));
            const m1 = out.meetsThreshold([addrs[0]]);
            expect(m1).toBe(false);
            const m2 = out.meetsThreshold(addrs, new bn_js_1.default(100));
            expect(m2).toBe(false);
            const m3 = out.meetsThreshold(addrs);
            expect(m3).toBe(true);
            const m4 = out.meetsThreshold(addrs, locktime.add(new bn_js_1.default(100)));
            expect(m4).toBe(true);
        });
        test("SECPMintOutput codecIDs", () => {
            const secpMintOutput = new outputs_2.SECPMintOutput(addrs, locktime, 3);
            expect(secpMintOutput.getCodecID()).toBe(codecID_zero);
            expect(secpMintOutput.getOutputID()).toBe(avm_1.AVMConstants.SECPMINTOUTPUTID);
            secpMintOutput.setCodecID(codecID_one);
            expect(secpMintOutput.getCodecID()).toBe(codecID_one);
            expect(secpMintOutput.getOutputID()).toBe(avm_1.AVMConstants.SECPMINTOUTPUTID_CODECONE);
            secpMintOutput.setCodecID(codecID_zero);
            expect(secpMintOutput.getCodecID()).toBe(codecID_zero);
            expect(secpMintOutput.getOutputID()).toBe(avm_1.AVMConstants.SECPMINTOUTPUTID);
        });
        test("Invalid SECPMintOutput codecID", () => {
            const secpMintOutput = new outputs_2.SECPMintOutput(addrs, locktime, 3);
            expect(() => {
                secpMintOutput.setCodecID(2);
            }).toThrow("Error - SECPMintOutput.setCodecID: invalid codecID. Valid codecIDs are 0 and 1.");
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3V0cHV0cy50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vdGVzdHMvYXBpcy9hdm0vb3V0cHV0cy50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsa0RBQXNCO0FBRXRCLGtFQUF5QztBQUN6QyxrREFBMkY7QUFDM0YsOENBQTBDO0FBQzFDLDJEQUE4RDtBQUM5RCxzQ0FBMkM7QUFFM0MsTUFBTSxRQUFRLEdBQWEsa0JBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtBQUVqRCxRQUFRLENBQUMsU0FBUyxFQUFFLEdBQVMsRUFBRTtJQUM3QixNQUFNLFlBQVksR0FBVyxDQUFDLENBQUE7SUFDOUIsTUFBTSxXQUFXLEdBQVcsQ0FBQyxDQUFBO0lBQzdCLFFBQVEsQ0FBQyxlQUFlLEVBQUUsR0FBUyxFQUFFO1FBQ25DLE1BQU0sS0FBSyxHQUFhO1lBQ3RCLFFBQVEsQ0FBQyxVQUFVLENBQUMsbUNBQW1DLENBQUM7WUFDeEQsUUFBUSxDQUFDLFVBQVUsQ0FBQyxtQ0FBbUMsQ0FBQztZQUN4RCxRQUFRLENBQUMsVUFBVSxDQUFDLG1DQUFtQyxDQUFDO1NBQ3pELENBQUMsSUFBSSxFQUFFLENBQUE7UUFFUixNQUFNLFFBQVEsR0FBTyxJQUFJLGVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUNsQyxNQUFNLE9BQU8sR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNwQyxNQUFNLFlBQVksR0FBTyxRQUFRLENBQUMsR0FBRyxDQUFDLElBQUksZUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUE7UUFFL0MsSUFBSSxDQUFDLG1CQUFtQixFQUFFLEdBQVMsRUFBRTtZQUNuQyxNQUFNLE9BQU8sR0FBa0IsSUFBSSx1QkFBYSxDQUFDLENBQUMsRUFBRSxPQUFPLEVBQUUsWUFBWSxFQUFFLENBQUMsQ0FBQyxDQUFBO1lBQzdFLE1BQU0sVUFB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QUNsRSxNQUFNLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO1lBQ2pDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQTtZQUU3RixNQUFNLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO1lBQ2xDLE1BQU0sQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUE7WUFFOUQsTUFBTSxDQUFDLEdBQVcsR0FBRyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUM3QyxNQUFNLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUNqRCxNQUFNLENBQUMsR0FBRyxFQUFFO2dCQUNSLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDdkIsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUE7WUFFWixNQUFNLENBQUMsR0FBVyxHQUFHLENBQUMsUUFBUSxFQUFFLENBQUE7WUFDaEMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFFcEQsTUFBTSxDQUFDLEdBQWEsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQTtZQUMxQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUE7WUFFbkUsTUFBTSxFQUFFLEdBQVksR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFDbEQsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQTtZQUN0QixNQUFNLEVBQUUsR0FBWSxHQUFHLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxJQUFJLGVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFBO1lBQzFELE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUE7WUFDdEIsTUFBTSxFQUFFLEdBQVksR0FBRyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQTtZQUM3QyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO1lBQ3JCLE1BQU0sRUFBRSxHQUFZLEdBQUcsQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxlQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO1lBQ3hFLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDdkIsQ0FBQyxDQUFDLENBQUE7UUFFRixJQUFJLENBQUMseUJBQXlCLEVBQUUsR0FBUyxFQUFFO1lBQ3pDLE1BQU0sY0FBYyxHQUFtQixJQUFJLHdCQUFjLENBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQTtZQUM3RSxNQUFNLENBQUMsY0FBYyxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFBO1lBQ3RELE1BQU0sQ0FBQyxjQUFjLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsa0JBQVksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFBO1lBQ3hFLGNBQWMsQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUE7WUFDdEMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQTtZQUNyRCxNQUFNLENBQUMsY0FBYyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGtCQUFZLENBQUMseUJBQXlCLENBQUMsQ0FBQTtZQUNqRixjQUFjLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxDQUFBO1lBQ3ZDLE1BQU0sQ0FBQyxjQUFjLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUE7WUFDdEQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxrQkFBWSxDQUFDLGdCQUFnQixDQUFDLENBQUE7UUFDMUUsQ0FBQyxDQUFDLENBQUE7UUFFRixJQUFJLENBQUMsZ0NBQWdDLEVBQUUsR0FBUyxFQUFFO1lBQ2hELE1BQU0sY0FBYyxHQUFtQixJQUFJLHdCQUFjLENBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQTtZQUM3RSxNQUFNLENBQUMsR0FBRyxFQUFFO2dCQUNWLGNBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFDOUIsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLGlGQUFpRixDQUFDLENBQUE7UUFDL0YsQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDLENBQUMsQ0FBQTtBQUNKLENBQUMsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJOIGZyb20gJ2JuLmpzJ1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyLydcbmltcG9ydCBCaW5Ub29scyBmcm9tICdzcmMvdXRpbHMvYmludG9vbHMnXG5pbXBvcnQgeyBTRUNQVHJhbnNmZXJPdXRwdXQsIFNlbGVjdE91dHB1dENsYXNzLCBORlRNaW50T3V0cHV0IH0gZnJvbSAnc3JjL2FwaXMvYXZtL291dHB1dHMnXG5pbXBvcnQgeyBPdXRwdXQgfSBmcm9tICdzcmMvY29tbW9uL291dHB1dCdcbmltcG9ydCB7IFNFQ1BNaW50T3V0cHV0IH0gZnJvbSAnLi4vLi4vLi4vc3JjL2FwaXMvYXZtL291dHB1dHMnXG5pbXBvcnQgeyBBVk1Db25zdGFudHMgfSBmcm9tICdzcmMvYXBpcy9hdm0nXG5cbmNvbnN0IGJpbnRvb2xzOiBCaW5Ub29scyA9IEJpblRvb2xzLmdldEluc3RhbmNlKClcblxuZGVzY3JpYmUoJ091dHB1dHMnLCAoKTogdm9pZCA9PiB7XG4gIGNvbnN0IGNvZGVjSURfemVybzogbnVtYmVyID0gMFxuICBjb25zdCBjb2RlY0lEX29uZTogbnVtYmVyID0gMVxuICBkZXNjcmliZSgnTkZUTWludE91dHB1dCcsICgpOiB2b2lkID0+IHtcbiAgICBjb25zdCBhZGRyczogQnVmZmVyW10gPSBbXG4gICAgICBiaW50b29scy5jYjU4RGVjb2RlKFwiQjZENHYxVnRQWUxiaVV2WVh0VzRQeDhvRTlpbUMydkdXXCIpLFxuICAgICAgYmludG9vbHMuY2I1OERlY29kZShcIlA1d2RSdVplYUR0MjhlSE1QNVMzdzlaZG9CZm83d3V6RlwiKSxcbiAgICAgIGJpbnRvb2xzLmNiNThEZWNvZGUoXCI2WTNreXNqRjlqbkhuWWtkUzl5R0F1b0h5YWUyZU5tZVZcIilcbiAgICBdLnNvcnQoKVxuXG4gICAgY29uc3QgbG9ja3RpbWU6IEJOID0gbmV3IEJOKDU0MzIxKVxuICAgIGNvbnN0IGFkZHJwYXkgPSBbYWRkcnNbMF0sIGFkZHJzWzFdXVxuICAgIGNvbnN0IGZhbGxMb2NrdGltZTogQk4gPSBsb2NrdGltZS5hZGQobmV3IEJOKDUwKSlcblxuICAgICAgdGVzdCgnU2VsZWN0T3V0cHV0Q2xhc3MnLCAoKTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IGdvb2RvdXQ6IE5GVE1pbnRPdXRwdXQgPSBuZXcgTkZUTWludE91dHB1dCgwLCBhZGRycGF5LCBmYWxsTG9ja3RpbWUsIDEpXG4gICAgICAgIGNvbnN0IG91dHBheW1lbnQ6IE91dHB1dCA9IFNlbGVjdE91dHB1dENsYXNzKGdvb2RvdXQuZ2V0T3V0cHV0SUQoKSlcbiAgICAgICAgZXhwZWN0KG91dHBheW1lbnQpLnRvQmVJbnN0YW5jZU9mKE5GVE1pbnRPdXRwdXQpXG4gICAgICAgIGV4cGVjdCgoKTogdm9pZCA9PiB7XG4gICAgICAgICAgICBTZWxlY3RPdXRwdXRDbGFzcyg5OSlcbiAgICAgICAgICB9KS50b1Rocm93KFwiRXJyb3IgLSBTZWxlY3RPdXRwdXRDbGFzczogdW5rbm93biBvdXRwdXRpZFwiKVxuICAgICAgfSlcblxuICAgICAgdGVzdCgnY29tcGFyYXRvcicsICgpOiB2b2lkID0+IHtcbiAgICAgICAgY29uc3Qgb3V0cGF5bWVudDE6IE91dHB1dCA9IG5ldyBORlRNaW50T3V0cHV0KDEsIGFkZHJzLCBmYWxsTG9ja3RpbWUsIDEpXG4gICAgICAgIGNvbnN0IG91dHBheW1lbnQyOiBPdXRwdXQgPSBuZXcgTkZUTWludE91dHB1dCgyLCBhZGRycywgZmFsbExvY2t0aW1lLCAxKVxuICAgICAgICBjb25zdCBvdXRwYXltZW50MzogT3V0cHV0ID0gbmV3IE5GVE1pbnRPdXRwdXQoMCwgYWRkcnMsIGZhbGxMb2NrdGltZSwgMSlcbiAgICAgICAgY29uc3QgY21wID0gT3V0cHV0LmNvbXBhcmF0b3IoKVxuICAgICAgICBleHBlY3QoY21wKG91dHBheW1lbnQxLCBvdXRwYXltZW50MSkpLnRvQmUoMClcbiAgICAgICAgZXhwZWN0KGNtcChvdXRwYXltZW50Miwgb3V0cGF5bWVudDIpKS50b0JlKDApXG4gICAgICAgIGV4cGVjdChjbXAob3V0cGF5bWVudDMsIG91dHBheW1lbnQzKSkudG9CZSgwKVxuICAgICAgICBleHBlY3QoY21wKG91dHBheW1lbnQxLCBvdXRwYXltZW50MikpLnRvQmUoLTEpXG4gICAgICAgIGV4cGVjdChjbXAob3V0cGF5bWVudDEsIG91dHBheW1lbnQzKSkudG9CZSgxKVxuICAgICAgfSlcblxuICAgICAgdGVzdChcIk5GVE1pbnRPdXRwdXQgY29kZWNJRHNcIiwgKCk6IHZvaWQgPT4ge1xuICAgICAgICBjb25zdCBuZnRNaW50T3V0cHV0OiBORlRNaW50T3V0cHV0ID0gbmV3IE5GVE1pbnRPdXRwdXQoMSwgYWRkcnMsIGZhbGxMb2NrdGltZSwgMSlcbiAgICAgICAgZXhwZWN0KG5mdE1pbnRPdXRwdXQuZ2V0Q29kZWNJRCgpKS50b0JlKGNvZGVjSURfemVybylcbiAgICAgICAgZXhwZWN0KG5mdE1pbnRPdXRwdXQuZ2V0T3V0cHV0SUQoKSkudG9CZShBVk1Db25zdGFudHMuTkZUTUlOVE9VVFBVVElEKVxuICAgICAgICAgIG5mdE1pbnRPdXRwdXQuc2V0Q29kZWNJRChjb2RlY0lEX29uZSlcbiAgICAgICAgZXhwZWN0KG5mdE1pbnRPdXRwdXQuZ2V0Q29kZWNJRCgpKS50b0JlKGNvZGVjSURfb25lKVxuICAgICAgICBleHBlY3QobmZ0TWludE91dHB1dC5nZXRPdXRwdXRJRCgpKS50b0JlKEFWTUNvbnN0YW50cy5ORlRNSU5UT1VUUFVUSURfQ09ERUNPTkUpXG4gICAgICAgICAgbmZ0TWludE91dHB1dC5zZXRDb2RlY0lEKGNvZGVjSURfemVybylcbiAgICAgICAgZXhwZWN0KG5mdE1pbnRPdXRwdXQuZ2V0Q29kZWNJRCgpKS50b0JlKGNvZGVjSURfemVybylcbiAgICAgICAgZXhwZWN0KG5mdE1pbnRPdXRwdXQuZ2V0T3V0cHV0SUQoKSkudG9CZShBVk1Db25zdGFudHMuTkZUTUlOVE9VVFBVVElEKVxuICAgICAgfSlcblxuICAgICAgdGVzdChcIkludmFsaWQgTkZUTWludE91dHB1dCBjb2RlY0lEXCIsICgpOiB2b2lkID0+IHtcbiAgICAgICAgY29uc3QgbmZ0TWludE91dHB1dDogTkZUTWludE91dHB1dCA9IG5ldyBORlRNaW50T3V0cHV0KDEsIGFkZHJzLCBmYWxsTG9ja3RpbWUsIDEpXG4gICAgICAgIGV4cGVjdCgoKTogdm9pZCA9PiB7XG4gICAgICAgICAgICBuZnRNaW50T3V0cHV0LnNldENvZGVjSUQoMilcbiAgICAgICAgfSkudG9UaHJvdyhcIkVycm9yIC0gTkZUTWludE91dHB1dC5zZXRDb2RlY0lEOiBpbnZhbGlkIGNvZGVjSUQuIFZhbGlkIGNvZGVjSURzIGFyZSAwIGFuZCAxLlwiKVxuICAgICAgfSlcblxuICAgICAgdGVzdCgnRnVuY3Rpb25hbGl0eScsICgpOiB2b2lkID0+IHtcbiAgICAgICAgY29uc3Qgb3V0OiBORlRNaW50T3V0cHV0ID0gbmV3IE5GVE1pbnRPdXRwdXQoMCwgYWRkcnMsIGZhbGxMb2NrdGltZSwgMylcbiAgICAgICAgZXhwZWN0KG91dC5nZXRPdXRwdXRJRCgpKS50b0JlKDEwKVxuICAgICAgICBleHBlY3QoSlNPTi5zdHJpbmdpZnkob3V0LmdldEFkZHJlc3NlcygpLnNvcnQoKSkpLnRvU3RyaWN0RXF1YWwoSlNPTi5zdHJpbmdpZnkoYWRkcnMuc29ydCgpKSlcblxuICAgICAgICBleHBlY3Qob3V0LmdldFRocmVzaG9sZCgpKS50b0JlKDMpXG4gICAgICAgICAgLy8gZXhwZWN0KG91dC5nZXRMb2NrdGltZSgpLnRvTnVtYmVyKCkpLnRvQmUobG9ja3RpbWUudG9OdW1iZXIoKSlcblxuICAgICAgICBjb25zdCByID0gb3V0LmdldEFkZHJlc3NJZHgoYWRkcnNbMl0pXG4gICAgICAgIGV4cGVjdChvdXQuZ2V0QWRkcmVzcyhyKSkudG9TdHJpY3RFcXVhbChhZGRyc1syXSlcbiAgICAgICAgZXhwZWN0KCgpOiB2b2lkID0+IHtcbiAgICAgICAgICAgICAgb3V0LmdldEFkZHJlc3MoNDAwKVxuICAgICAgICB9KS50b1Rocm93KClcblxuICAgICAgICBjb25zdCBiOiBCdWZmZXIgPSBvdXQudG9CdWZmZXIoKVxuICAgICAgICBleHBlY3Qob3V0LnRvU3RyaW5nKCkpLnRvQmUoYmludG9vbHMuYnVmZmVyVG9CNTgoYikpXG5cbiAgICAgICAgY29uc3QgczogQnVmZmVyW10gPSBvdXQuZ2V0U3BlbmRlcnMoYWRkcnMpXG4gICAgICAgIGV4cGVjdChKU09OLnN0cmluZ2lmeShzLnNvcnQoKSkpLnRvQmUoSlNPTi5zdHJpbmdpZnkoYWRkcnMuc29ydCgpKSlcblxuICAgICAgICBjb25zdCBtMTogYm9vbGVhbiA9IG91dC5tZWV0c1RocmVzaG9sZChbYWRkcnNbMF1dKVxuICAgICAgICBleHBlY3QobTEpLnRvQmUoZmFsc2UpXG4gICAgICAgIGNvbnN0IG0yOiBib29sZWFuID0gb3V0Lm1lZXRzVGhyZXNob2xkKGFkZHJzLCBuZXcgQk4oMTAwKSlcbiAgICAgICAgZXhwZWN0KG0yKS50b0JlKGZhbHNlKVxuICAgICAgICBjb25zdCBtMzogYm9vbGVhbiA9IG91dC5tZWV0c1RocmVzaG9sZChhZGRycylcbiAgICAgICAgZXhwZWN0KG0zKS50b0JlKHRydWUpXG4gICAgICAgIGNvbnN0IG00OiBib29sZWFuID0gb3V0Lm1lZXRzVGhyZXNob2xkKGFkZHJzLCBsb2NrdGltZS5hZGQobmV3IEJOKDEwMCkpKVxuICAgICAgICBleHBlY3QobTQpLnRvQmUodHJ1ZSlcbiAgICAgIH0pXG4gICAgfSlcblxuICBkZXNjcmliZSgnU0VDUFRyYW5zZmVyT3V0cHV0JywgKCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGFkZHJzOiBCdWZmZXJbXSA9IFtcbiAgICAgIGJpbnRvb2xzLmNiNThEZWNvZGUoXCJCNkQ0djFWdFBZTGJpVXZZWHRXNFB4OG9FOWltQzJ2R1dcIiksXG4gICAgICBiaW50b29scy5jYjU4RGVjb2RlKFwiUDV3ZFJ1WmVhRHQyOGVITVA1UzN3OVpkb0Jmbzd3dXpGXCIpLFxuICAgICAgYmludG9vbHMuY2I1OERlY29kZShcIjZZM2t5c2pGOWpuSG5Za2RTOXlHQXVvSHlhZTJlTm1lVlwiKVxuICAgIF0uc29ydCgpXG5cbiAgICBjb25zdCBsb2NrdGltZTogQk4gPSBuZXcgQk4oNTQzMjEpXG4gICAgY29uc3QgYWRkcnBheTogQnVmZmVyW10gPSBbYWRkcnNbMF0sIGFkZHJzWzFdXVxuICAgIGNvbnN0IGZhbGxMb2NrdGltZTogQk4gPSBsb2NrdGltZS5hZGQobmV3IEJOKDUwKSlcblxuICAgICAgdGVzdCgnU2VsZWN0T3V0cHV0Q2xhc3MnLCAoKTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IGdvb2RvdXQ6IFNFQ1BUcmFuc2Zlck91dHB1dCA9IG5ldyBTRUNQVHJhbnNmZXJPdXRwdXQobmV3IEJOKDI2MDApLCBhZGRycGF5LCBmYWxsTG9ja3RpbWUsIDEpXG4gICAgICAgIGNvbnN0IG91dHBheW1lbnQ6IE91dHB1dCA9IFNlbGVjdE91dHB1dENsYXNzKGdvb2RvdXQuZ2V0T3V0cHV0SUQoKSlcbiAgICAgICAgZXhwZWN0KG91dHBheW1lbnQpLnRvQmVJbnN0YW5jZU9mKFNFQ1BUcmFuc2Zlck91dHB1dClcbiAgICAgICAgZXhwZWN0KCgpOiB2b2lkID0+IHtcbiAgICAgICAgICBTZWxlY3RPdXRwdXRDbGFzcyg5OSlcbiAgICAgICAgfSkudG9UaHJvdyhcIkVycm9yIC0gU2VsZWN0T3V0cHV0Q2xhc3M6IHVua25vd24gb3V0cHV0aWRcIilcbiAgICAgIH0pXG5cbiAgICAgIHRlc3QoJ2NvbXBhcmF0b3InLCAoKTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IG91dHBheW1lbnQxOiBPdXRwdXQgPSBuZXcgU0VDUFRyYW5zZmVyT3V0cHV0KG5ldyBCTigxMDAwMCksIGFkZHJzLCBsb2NrdGltZSwgMylcbiAgICAgICAgY29uc3Qgb3V0cGF5bWVudDI6IE91dHB1dCA9IG5ldyBTRUNQVHJhbnNmZXJPdXRwdXQobmV3IEJOKDEwMDAxKSwgYWRkcnMsIGxvY2t0aW1lLCAzKVxuICAgICAgICBjb25zdCBvdXRwYXltZW50MzogT3V0cHV0ID0gbmV3IFNFQ1BUcmFuc2Zlck91dHB1dChuZXcgQk4oOTk5OSksIGFkZHJzLCBsb2NrdGltZSwgMylcbiAgICAgICAgY29uc3QgY21wID0gT3V0cHV0LmNvbXBhcmF0b3IoKVxuICAgICAgICBleHBlY3QoY21wKG91dHBheW1lbnQxLCBvdXRwYXltZW50MSkpLnRvQmUoMClcbiAgICAgICAgZXhwZWN0KGNtcChvdXRwYXltZW50Miwgb3V0cGF5bWVudDIpKS50b0JlKDApXG4gICAgICAgIGV4cGVjdChjbXAob3V0cGF5bWVudDMsIG91dHBheW1lbnQzKSkudG9CZSgwKVxuICAgICAgICBleHBlY3QoY21wKG91dHBheW1lbnQxLCBvdXRwYXltZW50MikpLnRvQmUoLTEpXG4gICAgICAgIGV4cGVjdChjbXAob3V0cGF5bWVudDEsIG91dHBheW1lbnQzKSkudG9CZSgxKVxuICAgICAgfSlcblxuICAgICAgdGVzdCgnU0VDUFRyYW5zZmVyT3V0cHV0JywgKCk6IHZvaWQgPT4ge1xuICAgICAgICBjb25zdCBvdXQ6IFNFQ1BUcmFuc2Zlck91dHB1dCA9IG5ldyBTRUNQVHJhbnNmZXJPdXRwdXQobmV3IEJOKDEwMDAwKSwgYWRkcnMsIGxvY2t0aW1lLCAzKVxuICAgICAgICBleHBlY3Qob3V0LmdldE91dHB1dElEKCkpLnRvQmUoNylcbiAgICAgICAgZXhwZWN0KEpTT04uc3RyaW5naWZ5KG91dC5nZXRBZGRyZXNzZXMoKS5zb3J0KCkpKS50b1N0cmljdEVxdWFsKEpTT04uc3RyaW5naWZ5KGFkZHJzLnNvcnQoKSkpXG5cbiAgICAgICAgZXhwZWN0KG91dC5nZXRUaHJlc2hvbGQoKSkudG9CZSgzKVxuICAgICAgICBleHBlY3Qob3V0LmdldExvY2t0aW1lKCkudG9OdW1iZXIoKSkudG9CZShsb2NrdGltZS50b051bWJlcigpKVxuXG4gICAgICAgIGNvbnN0IHI6IG51bWJlciA9IG91dC5nZXRBZGRyZXNzSWR4KGFkZHJzWzJdKVxuICAgICAgICBleHBlY3Qob3V0LmdldEFkZHJlc3MocikpLnRvU3RyaWN0RXF1YWwoYWRkcnNbMl0pXG4gICAgICAgIGV4cGVjdCgoKTogdm9pZCA9PiB7XG4gICAgICAgICAgb3V0LmdldEFkZHJlc3MoNDAwKVxuICAgICAgICB9KS50b1Rocm93KClcblxuICAgICAgICBleHBlY3Qob3V0LmdldEFtb3VudCgpLnRvTnVtYmVyKCkpLnRvQmUoMTAwMDApXG5cbiAgICAgICAgY29uc3QgYjogQnVmZmVyID0gb3V0LnRvQnVmZmVyKClcbiAgICAgICAgZXhwZWN0KG91dC50b1N0cmluZygpKS50b0JlKGJpbnRvb2xzLmJ1ZmZlclRvQjU4KGIpKVxuXG4gICAgICAgIGNvbnN0IHM6IEJ1ZmZlcltdID0gb3V0LmdldFNwZW5kZXJzKGFkZHJzKVxuICAgICAgICBleHBlY3QoSlNPTi5zdHJpbmdpZnkocy5zb3J0KCkpKS50b0JlKEpTT04uc3RyaW5naWZ5KGFkZHJzLnNvcnQoKSkpXG5cbiAgICAgICAgY29uc3QgbTE6IGJvb2xlYW4gPSBvdXQubWVldHNUaHJlc2hvbGQoW2FkZHJzWzBdXSlcbiAgICAgICAgZXhwZWN0KG0xKS50b0JlKGZhbHNlKVxuICAgICAgICBjb25zdCBtMjogYm9vbGVhbiA9IG91dC5tZWV0c1RocmVzaG9sZChhZGRycywgbmV3IEJOKDEwMCkpXG4gICAgICAgIGV4cGVjdChtMikudG9CZShmYWxzZSlcbiAgICAgICAgY29uc3QgbTM6IGJvb2xlYW4gPSBvdXQubWVldHNUaHJlc2hvbGQoYWRkcnMpXG4gICAgICAgIGV4cGVjdChtMykudG9CZSh0cnVlKVxuICAgICAgICBjb25zdCBtNDogYm9vbGVhbiA9IG91dC5tZWV0c1RocmVzaG9sZChhZGRycywgbG9ja3RpbWUuYWRkKG5ldyBCTigxMDApKSlcbiAgICAgICAgZXhwZWN0KG00KS50b0JlKHRydWUpXG4gICAgICB9KVxuXG4gICAgICB0ZXN0KFwiU0VDUFRyYW5zZmVyT3V0cHV0IGNvZGVjSURzXCIsICgpOiB2b2lkID0+IHtcbiAgICAgICAgY29uc3Qgc2VjUFRyYW5zZmVyT3V0cHV0OiBTRUNQVHJhbnNmZXJPdXRwdXQgPSBuZXcgU0VDUFRyYW5zZmVyT3V0cHV0KG5ldyBCTigxMDAwMCksIGFkZHJzLCBsb2NrdGltZSwgMylcbiAgICAgICAgZXhwZWN0KHNlY1BUcmFuc2Zlck91dHB1dC5nZXRDb2RlY0lEKCkpLnRvQmUoY29kZWNJRF96ZXJvKVxuICAgICAgICBleHBlY3Qoc2VjUFRyYW5zZmVyT3V0cHV0LmdldE91dHB1dElEKCkpLnRvQmUoQVZNQ29uc3RhbnRzLlNFQ1BYRkVST1VUUFVUSUQpXG4gICAgICAgIHNlY1BUcmFuc2Zlck91dHB1dC5zZXRDb2RlY0lEKGNvZGVjSURfb25lKVxuICAgICAgICBleHBlY3Qoc2VjUFRyYW5zZmVyT3V0cHV0LmdldENvZGVjSUQoKSkudG9CZShjb2RlY0lEX29uZSlcbiAgICAgICAgZXhwZWN0KHNlY1BUcmFuc2Zlck91dHB1dC5nZXRPdXRwdXRJRCgpKS50b0JlKEFWTUNvbnN0YW50cy5TRUNQWEZFUk9VVFBVVElEX0NPREVDT05FKVxuICAgICAgICBzZWNQVHJhbnNmZXJPdXRwdXQuc2V0Q29kZWNJRChjb2RlY0lEX3plcm8pXG4gICAgICAgIGV4cGVjdChzZWNQVHJhbnNmZXJPdXRwdXQuZ2V0Q29kZWNJRCgpKS50b0JlKGNvZGVjSURfemVybylcbiAgICAgICAgZXhwZWN0KHNlY1BUcmFuc2Zlck91dHB1dC5nZXRPdXRwdXRJRCgpKS50b0JlKEFWTUNvbnN0YW50cy5TRUNQWEZFUk9VVFBVVElEKVxuICAgICAgfSlcblxuICAgICAgdGVzdChcIkludmFsaWQgU0VDUFRyYW5zZmVyT3V0cHV0IGNvZGVjSURcIiwgKCk6IHZvaWQgPT4ge1xuICAgICAgICBjb25zdCBzZWNQVHJhbnNmZXJPdXRwdXQ6IFNFQ1BUcmFuc2Zlck91dHB1dCA9IG5ldyBTRUNQVHJhbnNmZXJPdXRwdXQobmV3IEJOKDEwMDAwKSwgYWRkcnMsIGxvY2t0aW1lLCAzKVxuICAgICAgICBleHBlY3QoKCk6IHZvaWQgPT4ge1xuICAgICAgICAgIHNlY1BUcmFuc2Zlck91dHB1dC5zZXRDb2RlY0lEKDIpXG4gICAgICAgIH0pLnRvVGhyb3coXCJFcnJvciAtIFNFQ1BUcmFuc2Zlck91dHB1dC5zZXRDb2RlY0lEOiBpbnZhbGlkIGNvZGVjSUQuIFZhbGlkIGNvZGVjSURzIGFyZSAwIGFuZCAxLlwiKVxuICAgICAgfSlcblxuICAgICAgdGVzdCgnU0VDUE1pbnRPdXRwdXQnLCAoKTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IG91dDogU0VDUE1pbnRPdXRwdXQgPSBuZXcgU0VDUE1pbnRPdXRwdXQoYWRkcnMsIGxvY2t0aW1lLCAzKVxuICAgICAgICBleHBlY3Qob3V0LmdldE91dHB1dElEKCkpLnRvQmUoNilcbiAgICAgICAgZXhwZWN0KEpTT04uc3RyaW5naWZ5KG91dC5nZXRBZGRyZXNzZXMoKS5zb3J0KCkpKS50b1N0cmljdEVxdWFsKEpTT04uc3RyaW5naWZ5KGFkZHJzLnNvcnQoKSkpXG5cbiAgICAgICAgZXhwZWN0KG91dC5nZXRUaHJlc2hvbGQoKSkudG9CZSgzKVxuICAgICAgICBleHBlY3Qob3V0LmdldExvY2t0aW1lKCkudG9OdW1iZXIoKSkudG9CZShsb2NrdGltZS50b051bWJlcigpKVxuXG4gICAgICAgIGNvbnN0IHI6IG51bWJlciA9IG91dC5nZXRBZGRyZXNzSWR4KGFkZHJzWzJdKVxuICAgICAgICBleHBlY3Qob3V0LmdldEFkZHJlc3MocikpLnRvU3RyaWN0RXF1YWwoYWRkcnNbMl0pXG4gICAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgICAgICBvdXQuZ2V0QWRkcmVzcyg0MDApXG4gICAgICAgIH0pLnRvVGhyb3coKVxuXG4gICAgICAgIGNvbnN0IGI6IEJ1ZmZlciA9IG91dC50b0J1ZmZlcigpXG4gICAgICAgIGV4cGVjdChvdXQudG9TdHJpbmcoKSkudG9CZShiaW50b29scy5idWZmZXJUb0I1OChiKSlcblxuICAgICAgICBjb25zdCBzOiBCdWZmZXJbXSA9IG91dC5nZXRTcGVuZGVycyhhZGRycylcbiAgICAgICAgZXhwZWN0KEpTT04uc3RyaW5naWZ5KHMuc29ydCgpKSkudG9CZShKU09OLnN0cmluZ2lmeShhZGRycy5zb3J0KCkpKVxuXG4gICAgICAgIGNvbnN0IG0xOiBib29sZWFuID0gb3V0Lm1lZXRzVGhyZXNob2xkKFthZGRyc1swXV0pXG4gICAgICAgIGV4cGVjdChtMSkudG9CZShmYWxzZSlcbiAgICAgICAgY29uc3QgbTI6IGJvb2xlYW4gPSBvdXQubWVldHNUaHJlc2hvbGQoYWRkcnMsIG5ldyBCTigxMDApKVxuICAgICAgICBleHBlY3QobTIpLnRvQmUoZmFsc2UpXG4gICAgICAgIGNvbnN0IG0zOiBib29sZWFuID0gb3V0Lm1lZXRzVGhyZXNob2xkKGFkZHJzKVxuICAgICAgICBleHBlY3QobTMpLnRvQmUodHJ1ZSlcbiAgICAgICAgY29uc3QgbTQ6IGJvb2xlYW4gPSBvdXQubWVldHNUaHJlc2hvbGQoYWRkcnMsIGxvY2t0aW1lLmFkZChuZXcgQk4oMTAwKSkpXG4gICAgICAgIGV4cGVjdChtNCkudG9CZSh0cnVlKVxuICAgICAgfSlcblxuICAgICAgdGVzdChcIlNFQ1BNaW50T3V0cHV0IGNvZGVjSURzXCIsICgpOiB2b2lkID0+IHtcbiAgICAgICAgY29uc3Qgc2VjcE1pbnRPdXRwdXQ6IFNFQ1BNaW50T3V0cHV0ID0gbmV3IFNFQ1BNaW50T3V0cHV0KGFkZHJzLCBsb2NrdGltZSwgMylcbiAgICAgICAgZXhwZWN0KHNlY3BNaW50T3V0cHV0LmdldENvZGVjSUQoKSkudG9CZShjb2RlY0lEX3plcm8pXG4gICAgICAgIGV4cGVjdChzZWNwTWludE91dHB1dC5nZXRPdXRwdXRJRCgpKS50b0JlKEFWTUNvbnN0YW50cy5TRUNQTUlOVE9VVFBVVElEKVxuICAgICAgICBzZWNwTWludE91dHB1dC5zZXRDb2RlY0lEKGNvZGVjSURfb25lKVxuICAgICAgICBleHBlY3Qoc2VjcE1pbnRPdXRwdXQuZ2V0Q29kZWNJRCgpKS50b0JlKGNvZGVjSURfb25lKVxuICAgICAgICBleHBlY3Qoc2VjcE1pbnRPdXRwdXQuZ2V0T3V0cHV0SUQoKSkudG9CZShBVk1Db25zdGFudHMuU0VDUE1JTlRPVVRQVVRJRF9DT0RFQ09ORSlcbiAgICAgICAgc2VjcE1pbnRPdXRwdXQuc2V0Q29kZWNJRChjb2RlY0lEX3plcm8pXG4gICAgICAgIGV4cGVjdChzZWNwTWludE91dHB1dC5nZXRDb2RlY0lEKCkpLnRvQmUoY29kZWNJRF96ZXJvKVxuICAgICAgICBleHBlY3Qoc2VjcE1pbnRPdXRwdXQuZ2V0T3V0cHV0SUQoKSkudG9CZShBVk1Db25zdGFudHMuU0VDUE1JTlRPVVRQVVRJRClcbiAgICAgIH0pXG5cbiAgICAgIHRlc3QoXCJJbnZhbGlkIFNFQ1BNaW50T3V0cHV0IGNvZGVjSURcIiwgKCk6IHZvaWQgPT4ge1xuICAgICAgICBjb25zdCBzZWNwTWludE91dHB1dDogU0VDUE1pbnRPdXRwdXQgPSBuZXcgU0VDUE1pbnRPdXRwdXQoYWRkcnMsIGxvY2t0aW1lLCAzKVxuICAgICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICAgIHNlY3BNaW50T3V0cHV0LnNldENvZGVjSUQoMilcbiAgICAgICAgfSkudG9UaHJvdyhcIkVycm9yIC0gU0VDUE1pbnRPdXRwdXQuc2V0Q29kZWNJRDogaW52YWxpZCBjb2RlY0lELiBWYWxpZCBjb2RlY0lEcyBhcmUgMCBhbmQgMS5cIilcbiAgICAgIH0pXG4gIH0pXG59KVxuIl19