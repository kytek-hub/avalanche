"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const bn_js_1 = __importDefault(require("bn.js"));
const bintools_1 = __importDefault(require("src/utils/bintools"));
const outputs_1 = require("src/apis/platformvm/outputs");
const output_1 = require("src/common/output");
const bintools = bintools_1.default.getInstance();
describe('Outputs', () => {
    describe('SECPTransferOutput', () => {
        const addrs = [
            bintools.cb58Decode("B6D4v1VtPYLbiUvYXtW4Px8oE9imC2vGW"),
            bintools.cb58Decode("P5wdRuZeaDt28eHMP5S3w9ZdoBfo7wuzF"),
            bintools.cb58Decode("6Y3kysjF9jnHnYkdS9yGAuoHyae2eNmeV")
        ].sort();
        const locktime = new bn_js_1.default(54321);
        const addrpay = [addrs[0], addrs[1]];
        const fallLocktime = locktime.add(new bn_js_1.default(50));
        test('SelectOutputClass', () => {
            const goodout = new outputs_1.SECPTransferOutput(new bn_js_1.default(2600), addrpay, fallLocktime, 1);
            const outpayment = outputs_1.SelectOutputClass(goodout.getOutputID());
            expect(outpayment).toBeInstanceOf(outputs_1.SECPTransferOutput);
            expect(() => {
                outputs_1.SelectOutputClass(99);
            }).toThrow("Error - SelectOutputClass: unknown outputid");
        });
        test('comparator', () => {
            const outpayment1 = new outputs_1.SECPTransferOutput(new bn_js_1.default(10000), addrs, locktime, 3);
            const outpayment2 = new outputs_1.SECPTransferOutput(new bn_js_1.default(10001), addrs, locktime, 3);
            const outpayment3 = new outputs_1.SECPTransferOutput(new bn_js_1.default(9999), addrs, locktime, 3);
            const cmp = output_1.Output.comparator();
            expect(cmp(outpayment1, outpayment1)).toBe(0);
            expect(cmp(outpayment2, outpayment2)).toBe(0);
            expect(cmp(outpayment3, outpayment3)).toBe(0);
            expect(cmp(outpayment1, outpayment2)).toBe(-1);
            expect(cmp(outpayment1, outpayment3)).toBe(1);
        });
        test('SECPTransferOutput', () => {
            const out = new outputs_1.SECPTransferOutput(new bn_js_1.default(10000), addrs, locktime, 3);
            expect(out.getOutputID()).toBe(7);
            expect(JSON.stringify(out.getAddresses().sort())).toStrictEqual(JSON.stringify(addrs.sort()));
            expect(out.getThreshold()).toBe(3);
            expect(out.getLocktime().toNumber()).toBe(locktime.toNumber());
            const r = out.getAddressIdx(addrs[2]);
            expect(out.getAddress(r)).toStrictEqual(addrs[2]);
            expect(() => {
                out.getAddress(400);
            }).toThrow();
            expect(out.getAmount().toNumber()).toBe(10000);
            const b = out.toBuffer();
            expect(out.toString()).toBe(bintools.bufferToB58(b));
            const s = out.getSpenders(addrs);
            expect(JSON.stringify(s.sort())).toBe(JSON.stringify(addrs.sort()));
            const m1 = out.meetsThreshold([addrs[0]]);
            expect(m1).toBe(false);
            const m2 = out.meetsThreshold(addrs, new bn_js_1.default(100));
            expect(m2).toBe(false);
            const m3 = out.meetsThreshold(addrs);
            expect(m3).toBe(true);
            const m4 = out.meetsThreshold(addrs, locktime.add(new bn_js_1.default(100)));
            expect(m4).toBe(true);
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3V0cHV0cy50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vdGVzdHMvYXBpcy9wbGF0Zm9ybXZtL291dHB1dHMudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLGtEQUFzQjtBQUV0QixrRUFBeUM7QUFDekMseURBQW1GO0FBQ25GLDhDQUEwQztBQUUxQyxNQUFNLFFBQVEsR0FBYSxrQkFBUSxDQUFDLFdBQVcsRUFBRSxDQUFBO0FBRWpELFFBQVEsQ0FBQyxTQUFTLEVBQUUsR0FBUyxFQUFFO0lBQzdCLFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxHQUFTLEVBQUU7UUFDeEMsTUFBTSxLQUFLLEdBQWE7WUFDdEIsUUFBUSxDQUFDLFVBQVUsQ0FBQyxtQ0FBbUMsQ0FBQztZQUN4RCxRQUFRLENBQUMsVUFBVSxDQUFDLG1DQUFtQyxDQUFDO1lBQ3hELFFBQVEsQ0FBQyxVQUFVLENBQUMsbUNBQW1DLENBQUM7U0FDekQsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtRQUVSLE1BQU0sUUFBUSxHQUFPLElBQUksZUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBQ2xDLE1BQU0sT0FBTyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ3BDLE1BQU0sWUFBWSxHQUFPLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxlQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtRQUUvQyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsR0FBUyxFQUFFO1lBQ25DLE1BQU0sT0FBTyxHQUF1QixJQUFJLDRCQUFrQixDQUFDLElBQUksZUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsQ0FBQyxDQUFDLENBQUE7WUFDbEcsTUFBTSxVQUFVLEdBQVcsMkJBQWlCLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUE7WUFDbkUsTUFB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R0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO1lBQ3hFLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDdkIsQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDLENBQUMsQ0FBQTtBQUNKLENBQUMsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJOIGZyb20gJ2JuLmpzJ1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyLydcbmltcG9ydCBCaW5Ub29scyBmcm9tICdzcmMvdXRpbHMvYmludG9vbHMnXG5pbXBvcnQgeyBTRUNQVHJhbnNmZXJPdXRwdXQsIFNlbGVjdE91dHB1dENsYXNzIH0gZnJvbSAnc3JjL2FwaXMvcGxhdGZvcm12bS9vdXRwdXRzJ1xuaW1wb3J0IHsgT3V0cHV0IH0gZnJvbSAnc3JjL2NvbW1vbi9vdXRwdXQnXG5cbmNvbnN0IGJpbnRvb2xzOiBCaW5Ub29scyA9IEJpblRvb2xzLmdldEluc3RhbmNlKClcblxuZGVzY3JpYmUoJ091dHB1dHMnLCAoKTogdm9pZCA9PiB7XG4gIGRlc2NyaWJlKCdTRUNQVHJhbnNmZXJPdXRwdXQnLCAoKTogdm9pZCA9PiB7XG4gICAgY29uc3QgYWRkcnM6IEJ1ZmZlcltdID0gW1xuICAgICAgYmludG9vbHMuY2I1OERlY29kZShcIkI2RDR2MVZ0UFlMYmlVdllYdFc0UHg4b0U5aW1DMnZHV1wiKSxcbiAgICAgIGJpbnRvb2xzLmNiNThEZWNvZGUoXCJQNXdkUnVaZWFEdDI4ZUhNUDVTM3c5WmRvQmZvN3d1ekZcIiksXG4gICAgICBiaW50b29scy5jYjU4RGVjb2RlKFwiNlkza3lzakY5am5IbllrZFM5eUdBdW9IeWFlMmVObWVWXCIpXG4gICAgXS5zb3J0KClcblxuICAgIGNvbnN0IGxvY2t0aW1lOiBCTiA9IG5ldyBCTig1NDMyMSlcbiAgICBjb25zdCBhZGRycGF5ID0gW2FkZHJzWzBdLCBhZGRyc1sxXV1cbiAgICBjb25zdCBmYWxsTG9ja3RpbWU6IEJOID0gbG9ja3RpbWUuYWRkKG5ldyBCTig1MCkpXG5cbiAgICAgIHRlc3QoJ1NlbGVjdE91dHB1dENsYXNzJywgKCk6IHZvaWQgPT4ge1xuICAgICAgICBjb25zdCBnb29kb3V0OiBTRUNQVHJhbnNmZXJPdXRwdXQgPSBuZXcgU0VDUFRyYW5zZmVyT3V0cHV0KG5ldyBCTigyNjAwKSwgYWRkcnBheSwgZmFsbExvY2t0aW1lLCAxKVxuICAgICAgICBjb25zdCBvdXRwYXltZW50OiBPdXRwdXQgPSBTZWxlY3RPdXRwdXRDbGFzcyhnb29kb3V0LmdldE91dHB1dElEKCkpXG4gICAgICAgIGV4cGVjdChvdXRwYXltZW50KS50b0JlSW5zdGFuY2VPZihTRUNQVHJhbnNmZXJPdXRwdXQpXG4gICAgICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgICAgIFNlbGVjdE91dHB1dENsYXNzKDk5KVxuICAgICAgICAgIH0pLnRvVGhyb3coXCJFcnJvciAtIFNlbGVjdE91dHB1dENsYXNzOiB1bmtub3duIG91dHB1dGlkXCIpXG4gICAgICB9KVxuXG4gICAgICB0ZXN0KCdjb21wYXJhdG9yJywgKCk6IHZvaWQgPT4ge1xuICAgICAgICBjb25zdCBvdXRwYXltZW50MTogT3V0cHV0ID0gbmV3IFNFQ1BUcmFuc2Zlck91dHB1dChuZXcgQk4oMTAwMDApLCBhZGRycywgbG9ja3RpbWUsIDMpXG4gICAgICAgIGNvbnN0IG91dHBheW1lbnQyOiBPdXRwdXQgPSBuZXcgU0VDUFRyYW5zZmVyT3V0cHV0KG5ldyBCTigxMDAwMSksIGFkZHJzLCBsb2NrdGltZSwgMylcbiAgICAgICAgY29uc3Qgb3V0cGF5bWVudDM6IE91dHB1dCA9IG5ldyBTRUNQVHJhbnNmZXJPdXRwdXQobmV3IEJOKDk5OTkpLCBhZGRycywgbG9ja3RpbWUsIDMpXG4gICAgICAgIGNvbnN0IGNtcCA9IE91dHB1dC5jb21wYXJhdG9yKClcbiAgICAgICAgZXhwZWN0KGNtcChvdXRwYXltZW50MSwgb3V0cGF5bWVudDEpKS50b0JlKDApXG4gICAgICAgIGV4cGVjdChjbXAob3V0cGF5bWVudDIsIG91dHBheW1lbnQyKSkudG9CZSgwKVxuICAgICAgICBleHBlY3QoY21wKG91dHBheW1lbnQzLCBvdXRwYXltZW50MykpLnRvQmUoMClcbiAgICAgICAgZXhwZWN0KGNtcChvdXRwYXltZW50MSwgb3V0cGF5bWVudDIpKS50b0JlKC0xKVxuICAgICAgICBleHBlY3QoY21wKG91dHBheW1lbnQxLCBvdXRwYXltZW50MykpLnRvQmUoMSlcbiAgICAgIH0pXG5cbiAgICAgIHRlc3QoJ1NFQ1BUcmFuc2Zlck91dHB1dCcsICgpOiB2b2lkID0+IHtcbiAgICAgICAgY29uc3Qgb3V0OiBTRUNQVHJhbnNmZXJPdXRwdXQgPSBuZXcgU0VDUFRyYW5zZmVyT3V0cHV0KG5ldyBCTigxMDAwMCksIGFkZHJzLCBsb2NrdGltZSwgMylcbiAgICAgICAgZXhwZWN0KG91dC5nZXRPdXRwdXRJRCgpKS50b0JlKDcpXG4gICAgICAgIGV4cGVjdChKU09OLnN0cmluZ2lmeShvdXQuZ2V0QWRkcmVzc2VzKCkuc29ydCgpKSkudG9TdHJpY3RFcXVhbChKU09OLnN0cmluZ2lmeShhZGRycy5zb3J0KCkpKVxuXG4gICAgICAgIGV4cGVjdChvdXQuZ2V0VGhyZXNob2xkKCkpLnRvQmUoMylcbiAgICAgICAgZXhwZWN0KG91dC5nZXRMb2NrdGltZSgpLnRvTnVtYmVyKCkpLnRvQmUobG9ja3RpbWUudG9OdW1iZXIoKSlcblxuICAgICAgICBjb25zdCByOiBudW1iZXIgPSBvdXQuZ2V0QWRkcmVzc0lkeChhZGRyc1syXSlcbiAgICAgICAgZXhwZWN0KG91dC5nZXRBZGRyZXNzKHIpKS50b1N0cmljdEVxdWFsKGFkZHJzWzJdKVxuICAgICAgICBleHBlY3QoKCk6IHZvaWQgPT4ge1xuICAgICAgICAgIG91dC5nZXRBZGRyZXNzKDQwMClcbiAgICAgICAgfSkudG9UaHJvdygpXG5cbiAgICAgICAgZXhwZWN0KG91dC5nZXRBbW91bnQoKS50b051bWJlcigpKS50b0JlKDEwMDAwKVxuXG4gICAgICAgIGNvbnN0IGI6IEJ1ZmZlciA9IG91dC50b0J1ZmZlcigpXG4gICAgICAgIGV4cGVjdChvdXQudG9TdHJpbmcoKSkudG9CZShiaW50b29scy5idWZmZXJUb0I1OChiKSlcblxuICAgICAgICBjb25zdCBzOiBCdWZmZXJbXSA9IG91dC5nZXRTcGVuZGVycyhhZGRycylcbiAgICAgICAgZXhwZWN0KEpTT04uc3RyaW5naWZ5KHMuc29ydCgpKSkudG9CZShKU09OLnN0cmluZ2lmeShhZGRycy5zb3J0KCkpKVxuXG4gICAgICAgIGNvbnN0IG0xOiBib29sZWFuID0gb3V0Lm1lZXRzVGhyZXNob2xkKFthZGRyc1swXV0pXG4gICAgICAgIGV4cGVjdChtMSkudG9CZShmYWxzZSlcbiAgICAgICAgY29uc3QgbTI6IGJvb2xlYW4gPSBvdXQubWVldHNUaHJlc2hvbGQoYWRkcnMsIG5ldyBCTigxMDApKVxuICAgICAgICBleHBlY3QobTIpLnRvQmUoZmFsc2UpXG4gICAgICAgIGNvbnN0IG0zOiBib29sZWFuID0gb3V0Lm1lZXRzVGhyZXNob2xkKGFkZHJzKVxuICAgICAgICBleHBlY3QobTMpLnRvQmUodHJ1ZSlcbiAgICAgICAgY29uc3QgbTQ6IGJvb2xlYW4gPSBvdXQubWVldHNUaHJlc2hvbGQoYWRkcnMsIGxvY2t0aW1lLmFkZChuZXcgQk4oMTAwKSkpXG4gICAgICAgIGV4cGVjdChtNCkudG9CZSh0cnVlKVxuICAgICAgfSlcbiAgfSlcbn0pXG4iXX0=