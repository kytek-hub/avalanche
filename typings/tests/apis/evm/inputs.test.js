"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const utxos_1 = require("src/apis/avm/utxos");
const keychain_1 = require("src/apis/avm/keychain");
const inputs_1 = require("src/apis/avm/inputs");
const create_hash_1 = __importDefault(require("create-hash"));
const bintools_1 = __importDefault(require("src/utils/bintools"));
const bn_js_1 = __importDefault(require("bn.js"));
const buffer_1 = require("buffer/");
const outputs_1 = require("src/apis/avm/outputs");
const constants_1 = require("src/apis/evm/constants");
const input_1 = require("src/common/input");
const evm_1 = require("src/apis/evm");
/**
 * @ignore
 */
const bintools = bintools_1.default.getInstance();
describe('Inputs', () => {
    let set;
    let keymgr1;
    let keymgr2;
    let addrs1;
    let addrs2;
    let utxos;
    let hrp = "tests";
    const amnt = 10000;
    beforeEach(() => {
        set = new utxos_1.UTXOSet();
        keymgr1 = new keychain_1.KeyChain(hrp, 'C');
        keymgr2 = new keychain_1.KeyChain(hrp, 'C');
        addrs1 = [];
        addrs2 = [];
        utxos = [];
        for (let i = 0; i < 3; i++) {
            addrs1.push(keymgr1.makeKey().getAddress());
            addrs2.push(keymgr2.makeKey().getAddress());
        }
        const amount = new bn_js_1.default(amnt);
        const addresses = keymgr1.getAddresses();
        const locktime = new bn_js_1.default(54321);
        const threshold = 3;
        for (let i = 0; i < 3; i++) {
            const txid = buffer_1.Buffer.from(create_hash_1.default('sha256').update(bintools.fromBNToBuffer(new bn_js_1.default(i), 32)).digest());
            const txidx = buffer_1.Buffer.from(bintools.fromBNToBuffer(new bn_js_1.default(i), 4));
            const assetID = buffer_1.Buffer.from(create_hash_1.default('sha256').update(txid).digest());
            const out = new outputs_1.SECPTransferOutput(amount.add(new bn_js_1.default(i)), addresses, locktime, threshold);
            const xferout = new outputs_1.TransferableOutput(assetID, out);
            const u = new utxos_1.UTXO(constants_1.EVMConstants.LATESTCODEC, txid, txidx, assetID, out);
            u.fromBuffer(buffer_1.Buffer.concat([u.getCodecIDBuffer(), txid, txidx, xferout.toBuffer()]));
            utxos.push(u);
        }
        set.addArray(utxos);
    });
    test('SECPInput', () => {
        let u;
        let txid;
        let txidx;
        const amount = new bn_js_1.default(amnt);
        let input;
        let xferinput;
        u = utxos[0];
        txid = u.getTxID();
        txidx = u.getOutputIdx();
        const asset = u.getAssetID();
        input = new inputs_1.SECPTransferInput(amount);
        xferinput = new inputs_1.TransferableInput(txid, txidx, asset, input);
        expect(xferinput.getUTXOID()).toBe(u.getUTXOID());
        expect(input.getInputID()).toBe(constants_1.EVMConstants.SECPINPUTID);
        input.addSignatureIdx(0, addrs2[0]);
        input.addSignatureIdx(1, addrs2[1]);
        const newin = new inputs_1.SECPTransferInput();
        newin.fromBuffer(bintools.b58ToBuffer(input.toString()));
        expect(newin.toBuffer().toString('hex')).toBe(input.toBuffer().toString('hex'));
        expect(newin.getSigIdxs().toString()).toBe(input.getSigIdxs().toString());
    });
    test('Input comparator', () => {
        const inpt1 = new inputs_1.SECPTransferInput(utxos[0].getOutput().getAmount());
        const inpt2 = new inputs_1.SECPTransferInput(utxos[1].getOutput().getAmount());
        const inpt3 = new inputs_1.SECPTransferInput(utxos[2].getOutput().getAmount());
        const cmp = input_1.Input.comparator();
        expect(cmp(inpt1, inpt2)).toBe(-1);
        expect(cmp(inpt1, inpt3)).toBe(-1);
        expect(cmp(inpt1, inpt1)).toBe(0);
        expect(cmp(inpt2, inpt2)).toBe(0);
        expect(cmp(inpt3, inpt3)).toBe(0);
    });
    test('TransferableInput comparator', () => {
        const inpt1 = new inputs_1.SECPTransferInput(utxos[0].getOutput().getAmount());
        const in1 = new inputs_1.TransferableInput(utxos[0].getTxID(), utxos[0].getOutputIdx(), utxos[0].getAssetID(), inpt1);
        const inpt2 = new inputs_1.SECPTransferInput(utxos[1].getOutput().getAmount());
        const in2 = new inputs_1.TransferableInput(utxos[1].getTxID(), utxos[1].getOutputIdx(), utxos[1].getAssetID(), inpt2);
        const inpt3 = new inputs_1.SECPTransferInput(utxos[2].getOutput().getAmount());
        const in3 = new inputs_1.TransferableInput(utxos[2].getTxID(), utxos[2].getOutputIdx(), utxos[2].getAssetID(), inpt3);
        const cmp = inputs_1.TransferableInput.comparator();
        expect(cmp(in1, in2)).toBe(-1);
        expect(cmp(in1, in3)).toBe(-1);
        expect(cmp(in1, in1)).toBe(0);
        expect(cmp(in2, in2)).toBe(0);
        expect(cmp(in3, in3)).toBe(0);
    });
    test('EVMInput comparator', () => {
        let inputs = [];
        const address1 = "0x55ee05dF718f1a5C1441e76190EB1a19eE2C9430";
        const address3 = "0x9632a79656af553F58738B0FB750320158495942";
        const address4 = "0x4Cf2eD3665F6bFA95cE6A11CFDb7A2EF5FC1C7E4";
        const address6 = "0x3C7daE394BBf8e9EE1359ad14C1C47003bD06293";
        const address8 = "0x0Fa8EA536Be85F32724D57A37758761B86416123";
        const amount1 = 1;
        const amount2 = 2;
        const amount3 = 3;
        const amount4 = 4;
        const amount5 = 5;
        const amount6 = 6;
        const amount7 = 7;
        const amount8 = 8;
        const assetID1 = "2fombhL7aGPwj3KH4bfrmJwW6PVnMobf9Y2fn9GwxiAAJyFDbe"; // dbcf890f77f49b96857648b72b77f9f82937f28a68704af05da0dc12ba53f2db
        const assetID2 = "vvKCjrpggyQ8FhJ2D5EAKPh8x8y4JK93JQiWRpTKpEouydRbG"; // 7a6e1e3c9c66ed8f076180f89d01320795628dca633001ff437ac6ab58b455be
        const assetID3 = "eRo1eb2Yxd87KuMYANBSha3n138wtqRhFz2xjftsXWnmpCxyh"; // 54fbd087a8a9c739c2c7926d742ea7b937adbd512b9ff0fd51f460a763d1371a
        const assetID5 = "2QqUTT3XTgR6HLbCLGtjN2uDHHqNRaBgtBGJ5KCqW7BUaH1P8X"; // b9d16d7c7d2674c3c67c5c26d9d6e39a09a5991c588cdf60c4cca732b66fa749
        const assetID6 = "ZWXaLcAy1YWS3Vvjcrt2KcVA4VxBsMFt8yNDZABJkgBvgpRti"; // 49d0dc67846a20dfea79b7beeba84769efa4a0273575f65ca79f9dee1cd1250e
        const assetID7 = "FHfS61NfF5XdZU62bcXp9yRfgrZeiQC7VNJWKcpdb9QMLHs4L"; // 2070e77e34941439dc7bcf502dcf555c6ef0e3cc46bbac8a03b22e15c84a81f1
        const assetID8 = "ZL6NeWgcnxR2zhhKDx7h9Kg2mZgScC5N4RG5FCDayWY7W3whZ"; // 496849239bb1541e97fa8f89256965bf7e657f3bb530cad820dd41706c5e3836
        const nonce1 = 0;
        const nonce2 = 1;
        const nonce3 = 2;
        const nonce4 = 3;
        const nonce5 = 4;
        const nonce6 = 5;
        const nonce7 = 6;
        const nonce8 = 7;
        const input1 = new evm_1.EVMInput(address1, amount1, assetID1, nonce1);
        inputs.push(input1);
        const input2 = new evm_1.EVMInput(address1, amount2, assetID2, nonce2);
        inputs.push(input2);
        const input3 = new evm_1.EVMInput(address3, amount3, assetID2, nonce3);
        inputs.push(input3);
        const input4 = new evm_1.EVMInput(address4, amount4, assetID3, nonce4);
        inputs.push(input4);
        const input5 = new evm_1.EVMInput(address1, amount5, assetID5, nonce5);
        inputs.push(input5);
        const input6 = new evm_1.EVMInput(address6, amount6, assetID6, nonce6);
        inputs.push(input6);
        const input7 = new evm_1.EVMInput(address1, amount7, assetID7, nonce7);
        inputs.push(input7);
        const input8 = new evm_1.EVMInput(address8, amount8, assetID8, nonce8);
        inputs.push(input8);
        inputs = inputs.sort(evm_1.EVMInput.comparator());
        expect(inputs[0].getAmount().toString()).toBe("8");
        expect(inputs[1].getAmount().toString()).toBe("6");
        expect(inputs[2].getAmount().toString()).toBe("4");
        expect(inputs[3].getAmount().toString()).toBe("7");
        expect(inputs[4].getAmount().toString()).toBe("2");
        expect(inputs[5].getAmount().toString()).toBe("5");
        expect(inputs[6].getAmount().toString()).toBe("1");
        expect(inputs[7].getAmount().toString()).toBe("3");
        const cmp = evm_1.EVMInput.comparator();
        expect(cmp(input2, input1)).toBe(-1);
        expect(cmp(input1, input3)).toBe(-1);
        expect(cmp(input2, input3)).toBe(-1);
        expect(cmp(input1, input1)).toBe(0);
        expect(cmp(input2, input2)).toBe(0);
        expect(cmp(input3, input3)).toBe(0);
        expect(cmp(input1, input2)).toBe(1);
        expect(cmp(input3, input1)).toBe(1);
        expect(cmp(input3, input2)).toBe(1);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXRzLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi90ZXN0cy9hcGlzL2V2bS9pbnB1dHMudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLDhDQUFrRDtBQUNsRCxvREFBZ0Q7QUFDaEQsZ0RBQTBFO0FBQzFFLDhEQUFvQztBQUNwQyxrRUFBeUM7QUFDekMsa0RBQXNCO0FBQ3RCLG9DQUFnQztBQUNoQyxrREFFNkI7QUFDN0Isc0RBQXFEO0FBQ3JELDRDQUF3QztBQUV4QyxzQ0FBdUM7QUFFdkM7O0dBRUc7QUFDSCxNQUFNLFFBQVEsR0FBYSxrQkFBUSxDQUFDLFdBQVcsRUFBRSxDQUFBO0FBQ2pELFFBQVEsQ0FBQyxRQUFRLEVBQUUsR0FBUyxFQUFFO0lBQzVCLElBQUksR0FBWSxDQUFBO0lBQ2hCLElBQUksT0FBaUIsQ0FBQTtJQUNyQixJQUFJLE9BQWlCLENBQUE7SUFDckIsSUFBSSxNQUFnQixDQUFBO0lBQ3BCLElBQUksTUFBZ0IsQ0FBQTtJQUNwQixJQUFJLEtBQWEsQ0FBQTtJQUNqQixJQUFJLEdBQUcsR0FBVyxPQUFPLENBQUE7SUFDekIsTUFBTSxJQUFJLEdBQVcsS0FBSyxDQUFBO0lBQzFCLFVBQVUsQ0FBQyxHQUFTLEVBQUU7UUFDcEIsR0FBRyxHQUFHLElBQUksZUFBTyxFQUFFLENBQUE7UUFDbkIsT0FBTyxHQUFHLElBQUksbUJBQVEsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUE7UUFDaEMsT0FBTyxHQUFHLElBQUksbUJBQVEsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUE7UUFDaEMsTUFBTSxHQUFHLEVBQUUsQ0FBQTtRQUNYLE1BQU0sR0FBRyxFQUFFLENBQUE7UUFDWCxLQUFLLEdBQUcsRUFBRSxDQUFBO1FBQ1YsS0FBSyxJQUFJLENBQUMsR0FBVyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNsQyxNQUFNLENB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Q0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUNsRCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ2xELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDbEQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUVsRCxNQUFNLEdBQUcsR0FBRyxjQUFRLENBQUMsVUFBVSxFQUFFLENBQUE7UUFDakMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNwQyxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ3BDLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDcEMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDbkMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDbkMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDbkMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDbkMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDbkMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDckMsQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFVUWE9TZXQsIFVUWE8gfSBmcm9tICdzcmMvYXBpcy9hdm0vdXR4b3MnXG5pbXBvcnQgeyBLZXlDaGFpbiB9IGZyb20gJ3NyYy9hcGlzL2F2bS9rZXljaGFpbidcbmltcG9ydCB7IFNFQ1BUcmFuc2ZlcklucHV0LCBUcmFuc2ZlcmFibGVJbnB1dCB9IGZyb20gJ3NyYy9hcGlzL2F2bS9pbnB1dHMnXG5pbXBvcnQgY3JlYXRlSGFzaCBmcm9tICdjcmVhdGUtaGFzaCdcbmltcG9ydCBCaW5Ub29scyBmcm9tICdzcmMvdXRpbHMvYmludG9vbHMnXG5pbXBvcnQgQk4gZnJvbSAnYm4uanMnXG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tICdidWZmZXIvJ1xuaW1wb3J0IHtcbiAgU0VDUFRyYW5zZmVyT3V0cHV0LCBBbW91bnRPdXRwdXQsIFRyYW5zZmVyYWJsZU91dHB1dCxcbn0gZnJvbSAnc3JjL2FwaXMvYXZtL291dHB1dHMnXG5pbXBvcnQgeyBFVk1Db25zdGFudHMgfSBmcm9tICdzcmMvYXBpcy9ldm0vY29uc3RhbnRzJ1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tICdzcmMvY29tbW9uL2lucHV0J1xuaW1wb3J0IHsgT3V0cHV0IH0gZnJvbSAnc3JjL2NvbW1vbi9vdXRwdXQnXG5pbXBvcnQgeyBFVk1JbnB1dCB9IGZyb20gJ3NyYy9hcGlzL2V2bSdcblxuLyoqXG4gKiBAaWdub3JlXG4gKi9cbmNvbnN0IGJpbnRvb2xzOiBCaW5Ub29scyA9IEJpblRvb2xzLmdldEluc3RhbmNlKClcbmRlc2NyaWJlKCdJbnB1dHMnLCAoKTogdm9pZCA9PiB7XG4gIGxldCBzZXQ6IFVUWE9TZXRcbiAgbGV0IGtleW1ncjE6IEtleUNoYWluXG4gIGxldCBrZXltZ3IyOiBLZXlDaGFpblxuICBsZXQgYWRkcnMxOiBCdWZmZXJbXVxuICBsZXQgYWRkcnMyOiBCdWZmZXJbXVxuICBsZXQgdXR4b3M6IFVUWE9bXVxuICBsZXQgaHJwOiBzdHJpbmcgPSBcInRlc3RzXCJcbiAgY29uc3QgYW1udDogbnVtYmVyID0gMTAwMDBcbiAgYmVmb3JlRWFjaCgoKTogdm9pZCA9PiB7XG4gICAgc2V0ID0gbmV3IFVUWE9TZXQoKVxuICAgIGtleW1ncjEgPSBuZXcgS2V5Q2hhaW4oaHJwLCAnQycpXG4gICAga2V5bWdyMiA9IG5ldyBLZXlDaGFpbihocnAsICdDJylcbiAgICBhZGRyczEgPSBbXVxuICAgIGFkZHJzMiA9IFtdXG4gICAgdXR4b3MgPSBbXVxuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgIGFkZHJzMS5wdXNoKGtleW1ncjEubWFrZUtleSgpLmdldEFkZHJlc3MoKSlcbiAgICAgIGFkZHJzMi5wdXNoKGtleW1ncjIubWFrZUtleSgpLmdldEFkZHJlc3MoKSlcbiAgICB9XG4gICAgY29uc3QgYW1vdW50OiBCTiA9IG5ldyBCTihhbW50KVxuICAgIGNvbnN0IGFkZHJlc3NlczogQnVmZmVyW10gPSBrZXltZ3IxLmdldEFkZHJlc3NlcygpXG4gICAgY29uc3QgbG9ja3RpbWU6IEJOID0gbmV3IEJOKDU0MzIxKVxuICAgIGNvbnN0IHRocmVzaG9sZDogbnVtYmVyID0gM1xuXG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgY29uc3QgdHhpZDogQnVmZmVyID0gQnVmZmVyLmZyb20oY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKGJpbnRvb2xzLmZyb21CTlRvQnVmZmVyKG5ldyBCTihpKSwgMzIpKS5kaWdlc3QoKSlcbiAgICAgIGNvbnN0IHR4aWR4OiBCdWZmZXIgPSBCdWZmZXIuZnJvbShiaW50b29scy5mcm9tQk5Ub0J1ZmZlcihuZXcgQk4oaSksIDQpKVxuICAgICAgY29uc3QgYXNzZXRJRDogQnVmZmVyID0gQnVmZmVyLmZyb20oY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKHR4aWQpLmRpZ2VzdCgpKVxuICAgICAgY29uc3Qgb3V0OiBPdXRwdXQgPSBuZXcgU0VDUFRyYW5zZmVyT3V0cHV0KGFtb3VudC5hZGQobmV3IEJOKGkpKSwgYWRkcmVzc2VzLCBsb2NrdGltZSwgdGhyZXNob2xkKVxuICAgICAgY29uc3QgeGZlcm91dDogVHJhbnNmZXJhYmxlT3V0cHV0ID0gbmV3IFRyYW5zZmVyYWJsZU91dHB1dChhc3NldElELCBvdXQpXG4gICAgICBjb25zdCB1OiBVVFhPID0gbmV3IFVUWE8oRVZNQ29uc3RhbnRzLkxBVEVTVENPREVDLCB0eGlkLCB0eGlkeCwgYXNzZXRJRCwgb3V0KVxuICAgICAgdS5mcm9tQnVmZmVyKEJ1ZmZlci5jb25jYXQoW3UuZ2V0Q29kZWNJREJ1ZmZlcigpLCB0eGlkLCB0eGlkeCwgeGZlcm91dC50b0J1ZmZlcigpXSkpXG4gICAgICB1dHhvcy5wdXNoKHUpXG4gICAgfVxuICAgIHNldC5hZGRBcnJheSh1dHhvcylcbiAgfSlcbiAgdGVzdCgnU0VDUElucHV0JywgKCk6IHZvaWQgPT4ge1xuICAgIGxldCB1OiBVVFhPXG4gICAgbGV0IHR4aWQ6IEJ1ZmZlclxuICAgIGxldCB0eGlkeDogQnVmZmVyXG4gICAgY29uc3QgYW1vdW50OiBCTiA9IG5ldyBCTihhbW50KVxuICAgIGxldCBpbnB1dDogU0VDUFRyYW5zZmVySW5wdXRcbiAgICBsZXQgeGZlcmlucHV0OiBUcmFuc2ZlcmFibGVJbnB1dFxuXG4gICAgdSA9IHV0eG9zWzBdXG4gICAgdHhpZCA9IHUuZ2V0VHhJRCgpXG4gICAgdHhpZHggPSB1LmdldE91dHB1dElkeCgpXG4gICAgY29uc3QgYXNzZXQgPSB1LmdldEFzc2V0SUQoKVxuXG4gICAgaW5wdXQgPSBuZXcgU0VDUFRyYW5zZmVySW5wdXQoYW1vdW50KVxuICAgIHhmZXJpbnB1dCA9IG5ldyBUcmFuc2ZlcmFibGVJbnB1dCh0eGlkLCB0eGlkeCwgYXNzZXQsIGlucHV0KVxuICAgIGV4cGVjdCh4ZmVyaW5wdXQuZ2V0VVRYT0lEKCkpLnRvQmUodS5nZXRVVFhPSUQoKSlcbiAgICBleHBlY3QoaW5wdXQuZ2V0SW5wdXRJRCgpKS50b0JlKEVWTUNvbnN0YW50cy5TRUNQSU5QVVRJRClcblxuICAgIGlucHV0LmFkZFNpZ25hdHVyZUlkeCgwLCBhZGRyczJbMF0pXG4gICAgaW5wdXQuYWRkU2lnbmF0dXJlSWR4KDEsIGFkZHJzMlsxXSlcblxuICAgIGNvbnN0IG5ld2luOiBTRUNQVHJhbnNmZXJJbnB1dCA9IG5ldyBTRUNQVHJhbnNmZXJJbnB1dCgpXG4gICAgbmV3aW4uZnJvbUJ1ZmZlcihiaW50b29scy5iNThUb0J1ZmZlcihpbnB1dC50b1N0cmluZygpKSlcbiAgICBleHBlY3QobmV3aW4udG9CdWZmZXIoKS50b1N0cmluZygnaGV4JykpLnRvQmUoaW5wdXQudG9CdWZmZXIoKS50b1N0cmluZygnaGV4JykpXG4gICAgZXhwZWN0KG5ld2luLmdldFNpZ0lkeHMoKS50b1N0cmluZygpKS50b0JlKGlucHV0LmdldFNpZ0lkeHMoKS50b1N0cmluZygpKVxuICB9KVxuXG4gIHRlc3QoJ0lucHV0IGNvbXBhcmF0b3InLCAoKTogdm9pZCA9PiB7XG4gICAgY29uc3QgaW5wdDE6IFNFQ1BUcmFuc2ZlcklucHV0ID0gbmV3IFNFQ1BUcmFuc2ZlcklucHV0KCh1dHhvc1swXS5nZXRPdXRwdXQoKSBhcyBBbW91bnRPdXRwdXQpLmdldEFtb3VudCgpKVxuXG4gICAgY29uc3QgaW5wdDI6IFNFQ1BUcmFuc2ZlcklucHV0ID0gbmV3IFNFQ1BUcmFuc2ZlcklucHV0KCh1dHhvc1sxXS5nZXRPdXRwdXQoKSBhcyBBbW91bnRPdXRwdXQpLmdldEFtb3VudCgpKVxuXG4gICAgY29uc3QgaW5wdDM6IFNFQ1BUcmFuc2ZlcklucHV0ID0gbmV3IFNFQ1BUcmFuc2ZlcklucHV0KCh1dHhvc1syXS5nZXRPdXRwdXQoKSBhcyBBbW91bnRPdXRwdXQpLmdldEFtb3VudCgpKVxuXG4gICAgY29uc3QgY21wID0gSW5wdXQuY29tcGFyYXRvcigpXG4gICAgZXhwZWN0KGNtcChpbnB0MSwgaW5wdDIpKS50b0JlKC0xKVxuICAgIGV4cGVjdChjbXAoaW5wdDEsIGlucHQzKSkudG9CZSgtMSlcbiAgICBleHBlY3QoY21wKGlucHQxLCBpbnB0MSkpLnRvQmUoMClcbiAgICBleHBlY3QoY21wKGlucHQyLCBpbnB0MikpLnRvQmUoMClcbiAgICBleHBlY3QoY21wKGlucHQzLCBpbnB0MykpLnRvQmUoMClcbiAgfSlcblxuICB0ZXN0KCdUcmFuc2ZlcmFibGVJbnB1dCBjb21wYXJhdG9yJywgKCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGlucHQxOiBTRUNQVHJhbnNmZXJJbnB1dCA9IG5ldyBTRUNQVHJhbnNmZXJJbnB1dCgodXR4b3NbMF0uZ2V0T3V0cHV0KCkgYXMgQW1vdW50T3V0cHV0KS5nZXRBbW91bnQoKSlcbiAgICBjb25zdCBpbjE6IFRyYW5zZmVyYWJsZUlucHV0ID0gbmV3IFRyYW5zZmVyYWJsZUlucHV0KHV0eG9zWzBdLmdldFR4SUQoKSwgdXR4b3NbMF0uZ2V0T3V0cHV0SWR4KCksIHV0eG9zWzBdLmdldEFzc2V0SUQoKSwgaW5wdDEpXG5cbiAgICBjb25zdCBpbnB0MjogU0VDUFRyYW5zZmVySW5wdXQgPSBuZXcgU0VDUFRyYW5zZmVySW5wdXQoKHV0eG9zWzFdLmdldE91dHB1dCgpIGFzIEFtb3VudE91dHB1dCkuZ2V0QW1vdW50KCkpXG4gICAgY29uc3QgaW4yOiBUcmFuc2ZlcmFibGVJbnB1dCA9IG5ldyBUcmFuc2ZlcmFibGVJbnB1dCh1dHhvc1sxXS5nZXRUeElEKCksIHV0eG9zWzFdLmdldE91dHB1dElkeCgpLCB1dHhvc1sxXS5nZXRBc3NldElEKCksIGlucHQyKVxuXG4gICAgY29uc3QgaW5wdDM6IFNFQ1BUcmFuc2ZlcklucHV0ID0gbmV3IFNFQ1BUcmFuc2ZlcklucHV0KCh1dHhvc1syXS5nZXRPdXRwdXQoKSBhcyBBbW91bnRPdXRwdXQpLmdldEFtb3VudCgpKVxuICAgIGNvbnN0IGluMzogVHJhbnNmZXJhYmxlSW5wdXQgPSBuZXcgVHJhbnNmZXJhYmxlSW5wdXQodXR4b3NbMl0uZ2V0VHhJRCgpLCB1dHhvc1syXS5nZXRPdXRwdXRJZHgoKSwgdXR4b3NbMl0uZ2V0QXNzZXRJRCgpLCBpbnB0MylcblxuICAgIGNvbnN0IGNtcCA9IFRyYW5zZmVyYWJsZUlucHV0LmNvbXBhcmF0b3IoKVxuICAgIGV4cGVjdChjbXAoaW4xLCBpbjIpKS50b0JlKC0xKVxuICAgIGV4cGVjdChjbXAoaW4xLCBpbjMpKS50b0JlKC0xKVxuICAgIGV4cGVjdChjbXAoaW4xLCBpbjEpKS50b0JlKDApXG4gICAgZXhwZWN0KGNtcChpbjIsIGluMikpLnRvQmUoMClcbiAgICBleHBlY3QoY21wKGluMywgaW4zKSkudG9CZSgwKVxuICB9KVxuXG4gIHRlc3QoJ0VWTUlucHV0IGNvbXBhcmF0b3InLCAoKTogdm9pZCA9PiB7XG4gICAgbGV0IGlucHV0czogRVZNSW5wdXRbXSA9IFtdXG4gICAgY29uc3QgYWRkcmVzczE6IHN0cmluZyA9IFwiMHg1NWVlMDVkRjcxOGYxYTVDMTQ0MWU3NjE5MEVCMWExOWVFMkM5NDMwXCJcbiAgICBjb25zdCBhZGRyZXNzMzogc3RyaW5nID0gXCIweDk2MzJhNzk2NTZhZjU1M0Y1ODczOEIwRkI3NTAzMjAxNTg0OTU5NDJcIlxuICAgIGNvbnN0IGFkZHJlc3M0OiBzdHJpbmcgPSBcIjB4NENmMmVEMzY2NUY2YkZBOTVjRTZBMTFDRkRiN0EyRUY1RkMxQzdFNFwiXG4gICAgY29uc3QgYWRkcmVzczY6IHN0cmluZyA9IFwiMHgzQzdkYUUzOTRCQmY4ZTlFRTEzNTlhZDE0QzFDNDcwMDNiRDA2MjkzXCJcbiAgICBjb25zdCBhZGRyZXNzODogc3RyaW5nID0gXCIweDBGYThFQTUzNkJlODVGMzI3MjRENTdBMzc3NTg3NjFCODY0MTYxMjNcIlxuICAgIGNvbnN0IGFtb3VudDE6IG51bWJlciA9IDFcbiAgICBjb25zdCBhbW91bnQyOiBudW1iZXIgPSAyXG4gICAgY29uc3QgYW1vdW50MzogbnVtYmVyID0gM1xuICAgIGNvbnN0IGFtb3VudDQ6IG51bWJlciA9IDRcbiAgICBjb25zdCBhbW91bnQ1OiBudW1iZXIgPSA1XG4gICAgY29uc3QgYW1vdW50NjogbnVtYmVyID0gNlxuICAgIGNvbnN0IGFtb3VudDc6IG51bWJlciA9IDdcbiAgICBjb25zdCBhbW91bnQ4OiBudW1iZXIgPSA4XG4gICAgY29uc3QgYXNzZXRJRDE6IHN0cmluZyA9IFwiMmZvbWJoTDdhR1B3ajNLSDRiZnJtSndXNlBWbk1vYmY5WTJmbjlHd3hpQUFKeUZEYmVcIiAvLyBkYmNmODkwZjc3ZjQ5Yjk2ODU3NjQ4YjcyYjc3ZjlmODI5MzdmMjhhNjg3MDRhZjA1ZGEwZGMxMmJhNTNmMmRiXG4gICAgY29uc3QgYXNzZXRJRDI6IHN0cmluZyA9IFwidnZLQ2pycGdneVE4RmhKMkQ1RUFLUGg4eDh5NEpLOTNKUWlXUnBUS3BFb3V5ZFJiR1wiIC8vIDdhNmUxZTNjOWM2NmVkOGYwNzYxODBmODlkMDEzMjA3OTU2MjhkY2E2MzMwMDFmZjQzN2FjNmFiNThiNDU1YmVcbiAgICBjb25zdCBhc3NldElEMzogc3RyaW5nID0gXCJlUm8xZWIyWXhkODdLdU1ZQU5CU2hhM24xMzh3dHFSaEZ6MnhqZnRzWFdubXBDeHloXCIgLy8gNTRmYmQwODdhOGE5YzczOWMyYzc5MjZkNzQyZWE3YjkzN2FkYmQ1MTJiOWZmMGZkNTFmNDYwYTc2M2QxMzcxYVxuICAgIGNvbnN0IGFzc2V0SUQ1OiBzdHJpbmcgPSBcIjJRcVVUVDNYVGdSNkhMYkNMR3RqTjJ1REhIcU5SYUJndEJHSjVLQ3FXN0JVYUgxUDhYXCIgLy8gYjlkMTZkN2M3ZDI2NzRjM2M2N2M1YzI2ZDlkNmUzOWEwOWE1OTkxYzU4OGNkZjYwYzRjY2E3MzJiNjZmYTc0OVxuICAgIGNvbnN0IGFzc2V0SUQ2OiBzdHJpbmcgPSBcIlpXWGFMY0F5MVlXUzNWdmpjcnQyS2NWQTRWeEJzTUZ0OHlORFpBQkprZ0J2Z3BSdGlcIiAvLyA0OWQwZGM2Nzg0NmEyMGRmZWE3OWI3YmVlYmE4NDc2OWVmYTRhMDI3MzU3NWY2NWNhNzlmOWRlZTFjZDEyNTBlXG4gICAgY29uc3QgYXNzZXRJRDc6IHN0cmluZyA9IFwiRkhmUzYxTmZGNVhkWlU2MmJjWHA5eVJmZ3JaZWlRQzdWTkpXS2NwZGI5UU1MSHM0TFwiIC8vIDIwNzBlNzdlMzQ5NDE0MzlkYzdiY2Y1MDJkY2Y1NTVjNmVmMGUzY2M0NmJiYWM4YTAzYjIyZTE1Yzg0YTgxZjFcbiAgICBjb25zdCBhc3NldElEODogc3RyaW5nID0gXCJaTDZOZVdnY254UjJ6aGhLRHg3aDlLZzJtWmdTY0M1TjRSRzVGQ0RheVdZN1czd2haXCIgLy8gNDk2ODQ5MjM5YmIxNTQxZTk3ZmE4Zjg5MjU2OTY1YmY3ZTY1N2YzYmI1MzBjYWQ4MjBkZDQxNzA2YzVlMzgzNlxuICAgIGNvbnN0IG5vbmNlMTogbnVtYmVyID0gMFxuICAgIGNvbnN0IG5vbmNlMjogbnVtYmVyID0gMVxuICAgIGNvbnN0IG5vbmNlMzogbnVtYmVyID0gMlxuICAgIGNvbnN0IG5vbmNlNDogbnVtYmVyID0gM1xuICAgIGNvbnN0IG5vbmNlNTogbnVtYmVyID0gNFxuICAgIGNvbnN0IG5vbmNlNjogbnVtYmVyID0gNVxuICAgIGNvbnN0IG5vbmNlNzogbnVtYmVyID0gNlxuICAgIGNvbnN0IG5vbmNlODogbnVtYmVyID0gN1xuXG4gICAgY29uc3QgaW5wdXQxOiBFVk1JbnB1dCA9IG5ldyBFVk1JbnB1dChhZGRyZXNzMSwgYW1vdW50MSwgYXNzZXRJRDEsIG5vbmNlMSlcbiAgICBpbnB1dHMucHVzaChpbnB1dDEpXG4gICAgY29uc3QgaW5wdXQyOiBFVk1JbnB1dCA9IG5ldyBFVk1JbnB1dChhZGRyZXNzMSwgYW1vdW50MiwgYXNzZXRJRDIsIG5vbmNlMilcbiAgICBpbnB1dHMucHVzaChpbnB1dDIpXG4gICAgY29uc3QgaW5wdXQzOiBFVk1JbnB1dCA9IG5ldyBFVk1JbnB1dChhZGRyZXNzMywgYW1vdW50MywgYXNzZXRJRDIsIG5vbmNlMylcbiAgICBpbnB1dHMucHVzaChpbnB1dDMpXG4gICAgY29uc3QgaW5wdXQ0OiBFVk1JbnB1dCA9IG5ldyBFVk1JbnB1dChhZGRyZXNzNCwgYW1vdW50NCwgYXNzZXRJRDMsIG5vbmNlNClcbiAgICBpbnB1dHMucHVzaChpbnB1dDQpXG4gICAgY29uc3QgaW5wdXQ1OiBFVk1JbnB1dCA9IG5ldyBFVk1JbnB1dChhZGRyZXNzMSwgYW1vdW50NSwgYXNzZXRJRDUsIG5vbmNlNSlcbiAgICBpbnB1dHMucHVzaChpbnB1dDUpXG4gICAgY29uc3QgaW5wdXQ2OiBFVk1JbnB1dCA9IG5ldyBFVk1JbnB1dChhZGRyZXNzNiwgYW1vdW50NiwgYXNzZXRJRDYsIG5vbmNlNilcbiAgICBpbnB1dHMucHVzaChpbnB1dDYpXG4gICAgY29uc3QgaW5wdXQ3OiBFVk1JbnB1dCA9IG5ldyBFVk1JbnB1dChhZGRyZXNzMSwgYW1vdW50NywgYXNzZXRJRDcsIG5vbmNlNylcbiAgICBpbnB1dHMucHVzaChpbnB1dDcpXG4gICAgY29uc3QgaW5wdXQ4OiBFVk1JbnB1dCA9IG5ldyBFVk1JbnB1dChhZGRyZXNzOCwgYW1vdW50OCwgYXNzZXRJRDgsIG5vbmNlOClcbiAgICBpbnB1dHMucHVzaChpbnB1dDgpXG4gICAgaW5wdXRzID0gaW5wdXRzLnNvcnQoRVZNSW5wdXQuY29tcGFyYXRvcigpKVxuICAgIGV4cGVjdChpbnB1dHNbMF0uZ2V0QW1vdW50KCkudG9TdHJpbmcoKSkudG9CZShcIjhcIilcbiAgICBleHBlY3QoaW5wdXRzWzFdLmdldEFtb3VudCgpLnRvU3RyaW5nKCkpLnRvQmUoXCI2XCIpXG4gICAgZXhwZWN0KGlucHV0c1syXS5nZXRBbW91bnQoKS50b1N0cmluZygpKS50b0JlKFwiNFwiKVxuICAgIGV4cGVjdChpbnB1dHNbM10uZ2V0QW1vdW50KCkudG9TdHJpbmcoKSkudG9CZShcIjdcIilcbiAgICBleHBlY3QoaW5wdXRzWzRdLmdldEFtb3VudCgpLnRvU3RyaW5nKCkpLnRvQmUoXCIyXCIpXG4gICAgZXhwZWN0KGlucHV0c1s1XS5nZXRBbW91bnQoKS50b1N0cmluZygpKS50b0JlKFwiNVwiKVxuICAgIGV4cGVjdChpbnB1dHNbNl0uZ2V0QW1vdW50KCkudG9TdHJpbmcoKSkudG9CZShcIjFcIilcbiAgICBleHBlY3QoaW5wdXRzWzddLmdldEFtb3VudCgpLnRvU3RyaW5nKCkpLnRvQmUoXCIzXCIpXG5cbiAgICBjb25zdCBjbXAgPSBFVk1JbnB1dC5jb21wYXJhdG9yKClcbiAgICBleHBlY3QoY21wKGlucHV0MiwgaW5wdXQxKSkudG9CZSgtMSlcbiAgICBleHBlY3QoY21wKGlucHV0MSwgaW5wdXQzKSkudG9CZSgtMSlcbiAgICBleHBlY3QoY21wKGlucHV0MiwgaW5wdXQzKSkudG9CZSgtMSlcbiAgICBleHBlY3QoY21wKGlucHV0MSwgaW5wdXQxKSkudG9CZSgwKVxuICAgIGV4cGVjdChjbXAoaW5wdXQyLCBpbnB1dDIpKS50b0JlKDApXG4gICAgZXhwZWN0KGNtcChpbnB1dDMsIGlucHV0MykpLnRvQmUoMClcbiAgICBleHBlY3QoY21wKGlucHV0MSwgaW5wdXQyKSkudG9CZSgxKVxuICAgIGV4cGVjdChjbXAoaW5wdXQzLCBpbnB1dDEpKS50b0JlKDEpXG4gICAgZXhwZWN0KGNtcChpbnB1dDMsIGlucHV0MikpLnRvQmUoMSlcbiAgfSlcbn0pXG4iXX0=